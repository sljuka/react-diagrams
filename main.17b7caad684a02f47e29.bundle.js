(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(module,exports,__webpack_require__){window,module.exports=function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t){e.exports=__webpack_require__(240)},function(e,t){e.exports=__webpack_require__(404)},function(e,t){e.exports=__webpack_require__(834)},function(e,t,r){"use strict";function o(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),a=r(1),i=r(2),c=r(4);o(r(0)),o(r(1)),o(r(2)),t.default=()=>{const e=new n.DiagramEngine;return e.getLayerFactories().registerFactory(new n.NodeLayerFactory),e.getLayerFactories().registerFactory(new n.LinkLayerFactory),e.getLayerFactories().registerFactory(new c.SelectionBoxLayerFactory),e.getLabelFactories().registerFactory(new a.DefaultLabelFactory),e.getNodeFactories().registerFactory(new a.DefaultNodeFactory),e.getLinkFactories().registerFactory(new a.DefaultLinkFactory),e.getLinkFactories().registerFactory(new i.PathFindingLinkFactory),e.getPortFactories().registerFactory(new a.DefaultPortFactory),e.getStateMachine().pushState(new n.DefaultDiagramState),e}},function(e,t){e.exports=__webpack_require__(5)}])},1149:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(10),React=__webpack_require__(0),react_canvas_core_1=__webpack_require__(5),DemoCanvasWidget_1=__webpack_require__(14);exports.default=()=>{var engine=react_diagrams_1.default();const state=engine.getStateMachine().getCurrentState();state instanceof react_diagrams_1.DefaultDiagramState&&(state.dragNewLink.config.allowLooseLinks=!1);var model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);var link1=port1.link(port2),node3=new react_diagrams_1.DefaultNodeModel("Node 3","rgb(0,192,255)");return node3.addOutPort("Out"),node3.setPosition(100,200),model.addAll(node1,node2,node3,link1),engine.setModel(model),React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine}))}},1150:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(10),React=__webpack_require__(0),react_canvas_core_1=__webpack_require__(5),DemoCanvasWidget_1=__webpack_require__(14);function generateNodes(model,offsetX,offsetY){var node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100+offsetX,100+offsetY);var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(200+offsetX,100+offsetY);var link1=port1.link(port2);model.addAll(node1,node2,link1)}exports.default=()=>{for(var engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,i=0;i<8;i++)for(var j=0;j<8;j++)generateNodes(model,200*i,100*j);return engine.setModel(model),React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine}))}},1151:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),react_diagrams_1=__webpack_require__(10),react_canvas_core_1=__webpack_require__(5),DemoCanvasWidget_1=__webpack_require__(14);exports.default=()=>{var engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);let link1=port1.link(port2);model.addAll(node1,node2,link1);var node3=new react_diagrams_1.DefaultNodeModel("Node 3","rgb(0,192,255)"),port3=node3.addOutPort("Out");node3.setPosition(100,250);var node4=new react_diagrams_1.DefaultNodeModel("Node 4","rgb(192,255,0)"),port4=node4.addInPort("In");node4.setPosition(400,250);var link2=port3.link(port4);
//!=========================================  <<<<<<<
return link2.point(350,225),link2.point(200,225),model.addAll(node3,node4,link2),engine.setModel(model),
//!========================================= <<<<<<<
model.setLocked(!0),React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine}))}},1152:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(10),React=__webpack_require__(0),react_canvas_core_1=__webpack_require__(5),DemoCanvasWidget_1=__webpack_require__(14);exports.default=()=>{var engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel;model.setGridSize(50);var node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)");let port=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)");let port2=node2.addInPort("In");node2.setPosition(400,100);let link1=port.link(port2);return model.addAll(node1,node2,link1),engine.setModel(model),React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine}))}},1153:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),addon_actions_1=__webpack_require__(122),react_diagrams_1=__webpack_require__(10),react_canvas_core_1=__webpack_require__(5),DemoCanvasWidget_1=__webpack_require__(14);exports.default=()=>{var engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(255,99,66)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,40);var node3=new react_diagrams_1.DefaultNodeModel("Node 3","rgb(128,99,255)"),port3=node3.addInPort("In");node3.setPosition(300,160);let link1=port1.link(port2),link2=port1.link(port3);return model.addAll(node1,node2,node3,link1,link2).forEach(item=>{item.registerListener({eventDidFire:addon_actions_1.action("element eventDidFire")})}),model.registerListener({eventDidFire:addon_actions_1.action("model eventDidFire")}),engine.setModel(model),React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine}))}},1165:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(10),React=__webpack_require__(0),DemoWorkspaceWidget_1=__webpack_require__(59),react_canvas_core_1=__webpack_require__(5),DemoCanvasWidget_1=__webpack_require__(14);function generateNodes(model,offsetX,offsetY){var node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100+offsetX,100+offsetY);var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(200+offsetX,100+offsetY);var link1=port1.link(port2);model.addAll(node1,node2,link1)}exports.default=()=>{for(var engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,i=0;i<8;i++)for(var j=0;j<8;j++)generateNodes(model,200*i,100*j);return engine.setModel(model),React.createElement(DemoWorkspaceWidget_1.DemoWorkspaceWidget,{buttons:React.createElement(DemoWorkspaceWidget_1.DemoButton,{onClick:()=>engine.zoomToFit()},"Zoom to fit")},React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine})))}},1166:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(10),React=__webpack_require__(0),DemoWorkspaceWidget_1=__webpack_require__(59),addon_actions_1=__webpack_require__(122),react_canvas_core_1=__webpack_require__(5),DemoCanvasWidget_1=__webpack_require__(14);exports.default=()=>{const engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node A","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);const node2=new react_diagrams_1.DefaultNodeModel("Node B","rgb(255,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,50);const node3=new react_diagrams_1.DefaultNodeModel("Node C (no label)","rgb(192,255,255)"),port3=node3.addInPort("In");node3.setPosition(450,180);const node4=new react_diagrams_1.DefaultNodeModel("Node D","rgb(192,0,255)"),port4=node4.addInPort("In");node4.setPosition(300,250);const link1=port1.link(port2);link1.addLabel("Custom label 1"),link1.addLabel("Custom label 2");const link2=port1.link(port3),link3=port1.link(port4);return link3.addLabel("Emoji label: 🎉"),model.addAll(node1,node2,node3,node4,link1,link2,link3),engine.setModel(model),React.createElement(DemoWorkspaceWidget_1.DemoWorkspaceWidget,{buttons:React.createElement(DemoWorkspaceWidget_1.DemoButton,{onClick:()=>{addon_actions_1.action("Serialized Graph")(JSON.stringify(model.serializeDiagram(),null,2))}},"Serialize Graph")},React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine})))}},1167:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(10),_=__webpack_require__(51),React=__webpack_require__(0),DemoWorkspaceWidget_1=__webpack_require__(59),react_canvas_core_1=__webpack_require__(5),DemoCanvasWidget_1=__webpack_require__(14);class CloneSelected extends React.Component{constructor(){super(...arguments),this.addPorts=()=>{const nodes=_.values(this.props.model.getNodes());for(let node of nodes)"Node 2"===node.getOptions().name?node.addInPort(`in-${node.getInPorts().length+1}`,!1):node.addOutPort(`out-${node.getOutPorts().length+1}`,!1);this.props.engine.repaintCanvas()}}render(){const{engine:engine}=this.props;return React.createElement(DemoWorkspaceWidget_1.DemoWorkspaceWidget,{buttons:React.createElement(DemoWorkspaceWidget_1.DemoButton,{onClick:this.addPorts},"Add more ports")},React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine})))}}exports.default=()=>{var engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)");node1.setPosition(100,100);var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)");return node2.setPosition(400,100),model.addAll(node1,node2),engine.setModel(model),React.createElement(CloneSelected,{engine:engine,model:model})}},1168:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(10),_=__webpack_require__(51),React=__webpack_require__(0),DemoWorkspaceWidget_1=__webpack_require__(59),react_canvas_core_1=__webpack_require__(5),DemoCanvasWidget_1=__webpack_require__(14);class CloneSelected extends React.Component{constructor(props){super(props),this.cloneSelected=this.cloneSelected.bind(this)}cloneSelected(){let{engine:engine}=this.props,offset_x=100,offset_y=100,model=engine.getModel(),itemMap={};_.forEach(model.getSelectedEntities(),item=>{let newItem=item.clone(itemMap);newItem instanceof react_diagrams_1.NodeModel?(newItem.setPosition(newItem.getX()+offset_x,newItem.getY()+offset_y),model.addNode(newItem)):newItem instanceof react_diagrams_1.LinkModel&&(newItem.getPoints().forEach(p=>{p.setPosition(p.getX()+offset_x,p.getY()+offset_y)}),model.addLink(newItem)),newItem.setSelected(!1)}),this.forceUpdate()}render(){const{engine:engine}=this.props;return React.createElement(DemoWorkspaceWidget_1.DemoWorkspaceWidget,{buttons:React.createElement(DemoWorkspaceWidget_1.DemoButton,{onClick:this.cloneSelected},"Clone Selected")},React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine})))}}exports.default=()=>{var engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)");let port=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)");let port2=node2.addInPort("In");node2.setPosition(400,100);let link1=port.link(port2);return model.addAll(node1,node2,link1),engine.setModel(model),React.createElement(CloneSelected,{engine:engine,model:model})}},1169:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(10),React=__webpack_require__(0),DemoWorkspaceWidget_1=__webpack_require__(59),addon_actions_1=__webpack_require__(122),beautify=__webpack_require__(1170),react_canvas_core_1=__webpack_require__(5),DemoCanvasWidget_1=__webpack_require__(14);exports.default=()=>{var engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);var link1=port1.link(port2);model.addAll(node1,node2,link1),engine.setModel(model);
//!------------- SERIALIZING ------------------
var str=JSON.stringify(model.serialize()),model2=new react_diagrams_1.DiagramModel;
//!------------- DESERIALIZING ----------------
return model2.deserializeModel(JSON.parse(str),engine),engine.setModel(model2),React.createElement(DemoWorkspaceWidget_1.DemoWorkspaceWidget,{buttons:React.createElement(DemoWorkspaceWidget_1.DemoButton,{onClick:()=>{addon_actions_1.action("Serialized Graph")(beautify(model2.serialize(),null,2,80))}},"Serialize Graph")},React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine})))}},1171:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(10),React=__webpack_require__(0),_=__webpack_require__(51),DemoWorkspaceWidget_1=__webpack_require__(59),react_canvas_core_1=__webpack_require__(5),DemoCanvasWidget_1=__webpack_require__(14);class NodeDelayedPosition extends React.Component{constructor(props){super(props),this.updatePosition=this.updatePosition.bind(this),this.updatePositionViaSerialize=this.updatePositionViaSerialize.bind(this)}updatePosition(){const{engine:engine}=this.props;const nodes=engine.getModel().getNodes();let node=nodes[Object.keys(nodes)[0]];node.setPosition(node.getX()+30,node.getY()+30),engine.repaintCanvas()}updatePositionViaSerialize(){let{engine:engine}=this.props,model=engine.getModel(),str=JSON.stringify(model.serialize()),model2=new react_diagrams_1.DiagramModel,obj=JSON.parse(str),node=_.values(obj.layers[1].models)[0];node.x+=30,node.y+=30,model2.deserializeModel(obj,engine),engine.setModel(model2)}render(){const{engine:engine}=this.props;return React.createElement(DemoWorkspaceWidget_1.DemoWorkspaceWidget,{buttons:[React.createElement(DemoWorkspaceWidget_1.DemoButton,{key:1,onClick:this.updatePosition},"Update position"),React.createElement(DemoWorkspaceWidget_1.DemoButton,{key:2,onClick:this.updatePositionViaSerialize},"Update position via serialize")]},React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine})))}}exports.default=()=>{var engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);var link1=port1.link(port2);return model.addAll(node1,node2,link1),engine.setModel(model),React.createElement(NodeDelayedPosition,{engine:engine,model:model})}},1172:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),BodyWidget_1=__webpack_require__(1173),Application_1=__webpack_require__(1176);exports.default=()=>{var app=new Application_1.Application;return React.createElement(BodyWidget_1.BodyWidget,{app:app})}},1173:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),_=__webpack_require__(51),TrayWidget_1=__webpack_require__(1174),TrayItemWidget_1=__webpack_require__(1175),react_diagrams_1=__webpack_require__(10),react_canvas_core_1=__webpack_require__(5),DemoCanvasWidget_1=__webpack_require__(14),styled_1=__webpack_require__(53);var S;!function(S){S.Body=styled_1.default.div`
		flex-grow: 1;
		display: flex;
		flex-direction: column;
		min-height: 100%;
	`,S.Header=styled_1.default.div`
		display: flex;
		background: rgb(30, 30, 30);
		flex-grow: 0;
		flex-shrink: 0;
		color: white;
		font-family: Helvetica, Arial, sans-serif;
		padding: 10px;
		align-items: center;
	`,S.Content=styled_1.default.div`
		display: flex;
		flex-grow: 1;
	`,S.Layer=styled_1.default.div`
		position: relative;
		flex-grow: 1;
	`}(S||(S={}));exports.BodyWidget=class BodyWidget extends React.Component{render(){return React.createElement(S.Body,null,React.createElement(S.Header,null,React.createElement("div",{className:"title"},"Storm React Diagrams - DnD demo")),React.createElement(S.Content,null,React.createElement(TrayWidget_1.TrayWidget,null,React.createElement(TrayItemWidget_1.TrayItemWidget,{model:{type:"in"},name:"In Node",color:"rgb(192,255,0)"}),React.createElement(TrayItemWidget_1.TrayItemWidget,{model:{type:"out"},name:"Out Node",color:"rgb(0,192,255)"})),React.createElement(S.Layer,{onDrop:event=>{var data=JSON.parse(event.dataTransfer.getData("storm-diagram-node")),nodesCount=_.keys(this.props.app.getDiagramEngine().getModel().getNodes()).length,node=null;"in"===data.type?(node=new react_diagrams_1.DefaultNodeModel("Node "+(nodesCount+1),"rgb(192,255,0)")).addInPort("In"):(node=new react_diagrams_1.DefaultNodeModel("Node "+(nodesCount+1),"rgb(0,192,255)")).addOutPort("Out");var point=this.props.app.getDiagramEngine().getRelativeMousePoint(event);node.setPosition(point),this.props.app.getDiagramEngine().getModel().addNode(node),this.forceUpdate()},onDragOver:event=>{event.preventDefault()}},React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:this.props.app.getDiagramEngine()})))))}}},1174:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),styled_1=__webpack_require__(53);var S;!function(S){S.Tray=styled_1.default.div`
		min-width: 200px;
		background: rgb(20, 20, 20);
		flex-grow: 0;
		flex-shrink: 0;
	`}(S||(S={}));exports.TrayWidget=class TrayWidget extends React.Component{render(){return React.createElement(S.Tray,null,this.props.children)}}},1175:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),styled_1=__webpack_require__(53);var S;!function(S){S.Tray=styled_1.default.div`
		color: white;
		font-family: Helvetica, Arial;
		padding: 5px;
		margin: 0px 10px;
		border: solid 1px ${p=>p.color};
		border-radius: 5px;
		margin-bottom: 2px;
		cursor: pointer;
	`}(S||(S={}));exports.TrayItemWidget=class TrayItemWidget extends React.Component{render(){return React.createElement(S.Tray,{color:this.props.color,draggable:!0,onDragStart:event=>{event.dataTransfer.setData("storm-diagram-node",JSON.stringify(this.props.model))},className:"tray-item"},this.props.name)}}},1176:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const SRD=__webpack_require__(10);exports.Application=class Application{constructor(){this.diagramEngine=SRD.default(),this.newModel()}newModel(){this.activeModel=new SRD.DiagramModel,this.diagramEngine.setModel(this.activeModel);var node1=new SRD.DefaultNodeModel("Node 1","rgb(0,192,255)");let port=node1.addOutPort("Out");node1.setPosition(100,100);var node2=new SRD.DefaultNodeModel("Node 2","rgb(192,255,0)");let port2=node2.addInPort("In");node2.setPosition(400,100);let link1=port.link(port2);this.activeModel.addAll(node1,node2,link1)}getActiveDiagram(){return this.activeModel}getDiagramEngine(){return this.diagramEngine}}},1177:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(10),React=__webpack_require__(0),DemoWorkspaceWidget_1=__webpack_require__(59),addon_actions_1=__webpack_require__(122),react_canvas_core_1=__webpack_require__(5),DemoCanvasWidget_1=__webpack_require__(14);exports.default=()=>{const engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node A","rgb(0,192,255)"),port1=node1.addPort(new react_diagrams_1.DefaultPortModel(!1,"out-1","Out"));node1.setPosition(340,350);const node2=new react_diagrams_1.DefaultNodeModel("Node B","rgb(255,255,0)"),port2=node2.addPort(new react_diagrams_1.DefaultPortModel(!1,"out-1","Out"));node2.setPosition(240,80);const node3=new react_diagrams_1.DefaultNodeModel("Node C","rgb(192,255,255)"),port3=node3.addPort(new react_diagrams_1.DefaultPortModel(!0,"in-1","In"));node3.setPosition(540,180);const node4=new react_diagrams_1.DefaultNodeModel("Node D","rgb(192,0,255)"),port4=node4.addPort(new react_diagrams_1.DefaultPortModel(!0,"in-1","In"));node4.setPosition(95,185);const node5=new react_diagrams_1.DefaultNodeModel("Node E","rgb(192,255,0)");node5.setPosition(250,180);const pathfinding=engine.getLinkFactories().getFactory(react_diagrams_1.PathFindingLinkFactory.NAME),link1=port1.link(port4,pathfinding),link2=port2.link(port3,pathfinding);return link1.addLabel(new react_diagrams_1.DefaultLabelModel({label:"I am a label!",offsetY:20})),model.addAll(node1,node2,node3,node4,node5,link1,link2),engine.setModel(model),React.createElement(DemoWorkspaceWidget_1.DemoWorkspaceWidget,{buttons:React.createElement(DemoWorkspaceWidget_1.DemoButton,{onClick:()=>{addon_actions_1.action("Serialized Graph")(JSON.stringify(model.serialize(),null,2))}},"Serialize Graph")},React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine})))}},1178:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(10),React=__webpack_require__(0),DemoWorkspaceWidget_1=__webpack_require__(59),addon_actions_1=__webpack_require__(122),react_canvas_core_1=__webpack_require__(5),DemoCanvasWidget_1=__webpack_require__(14);class RightAnglePortModel extends react_diagrams_1.DefaultPortModel{createLinkModel(factory){return new react_diagrams_1.RightAngleLinkModel}}exports.RightAnglePortModel=RightAnglePortModel,exports.default=()=>{const engine=react_diagrams_1.default();engine.getLinkFactories().registerFactory(new react_diagrams_1.RightAngleLinkFactory);const model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node A","rgb(0,192,255)"),port1=node1.addPort(new RightAnglePortModel(!1,"out-1","Out"));node1.setPosition(340,350);const node2=new react_diagrams_1.DefaultNodeModel("Node B","rgb(255,255,0)"),port2=node2.addPort(new RightAnglePortModel(!1,"out-1","Out"));node2.setPosition(240,80);const node3=new react_diagrams_1.DefaultNodeModel("Node C","rgb(192,255,255)"),port3=node3.addPort(new RightAnglePortModel(!0,"in-1","In"));node3.setPosition(540,180);const node4=new react_diagrams_1.DefaultNodeModel("Node D","rgb(192,0,255)"),port4=node4.addPort(new RightAnglePortModel(!0,"in-1","In"));node4.setPosition(95,185);const link1=port1.link(port4),link2=port2.link(port3);return model.addAll(node1,node2,node3,node4,link1,link2),engine.setModel(model),React.createElement(DemoWorkspaceWidget_1.DemoWorkspaceWidget,{buttons:React.createElement(DemoWorkspaceWidget_1.DemoButton,{onClick:()=>{addon_actions_1.action("Serialized Graph")(JSON.stringify(model.serialize(),null,2))}},"Serialize Graph")},React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine})))}},1179:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(10),React=__webpack_require__(0),DiamondNodeModel_1=__webpack_require__(483),DiamondNodeFactory_1=__webpack_require__(1180),SimplePortFactory_1=__webpack_require__(1182),DiamondPortModel_1=__webpack_require__(484),react_canvas_core_1=__webpack_require__(5),DemoCanvasWidget_1=__webpack_require__(14);exports.default=()=>{var engine=react_diagrams_1.default();engine.getPortFactories().registerFactory(new SimplePortFactory_1.SimplePortFactory("diamond",config=>new DiamondPortModel_1.DiamondPortModel(react_diagrams_1.PortModelAlignment.LEFT))),engine.getNodeFactories().registerFactory(new DiamondNodeFactory_1.DiamondNodeFactory);var model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,200);var node2=new DiamondNodeModel_1.DiamondNodeModel;node2.setPosition(250,108);var node3=new react_diagrams_1.DefaultNodeModel("Node 3","red"),port3=node3.addInPort("In");node3.setPosition(500,100);var link1=port1.link(node2.getPort(react_diagrams_1.PortModelAlignment.LEFT)),link2=port3.link(node2.getPort(react_diagrams_1.PortModelAlignment.RIGHT)),node4=new react_diagrams_1.DefaultNodeModel("Node 4","rgb(0,192,255)"),port4=node4.addOutPort("Out");node4.setPosition(200,10);var link3=port4.link(node2.getPort(react_diagrams_1.PortModelAlignment.TOP)),node5=new react_diagrams_1.DefaultNodeModel("Node 5","mediumpurple"),port5=node5.addInPort("In");node5.setPosition(400,300);var link4=port5.link(node2.getPort(react_diagrams_1.PortModelAlignment.BOTTOM));return model.addAll(node1,node2,node3,link1,link2,node4,link3,link4,node5),engine.setModel(model),React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine}))}},1180:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const DiamondNodeWidget_1=__webpack_require__(1181),DiamondNodeModel_1=__webpack_require__(483),React=__webpack_require__(0),react_canvas_core_1=__webpack_require__(5);exports.DiamondNodeFactory=class DiamondNodeFactory extends react_canvas_core_1.AbstractReactFactory{constructor(){super("diamond")}generateReactWidget(event){return React.createElement(DiamondNodeWidget_1.DiamonNodeWidget,{engine:this.engine,size:50,node:event.model})}generateModel(event){return new DiamondNodeModel_1.DiamondNodeModel}}},1181:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),react_diagrams_1=__webpack_require__(10),styled_1=__webpack_require__(53);var S;!function(S){S.Port=styled_1.default.div`
		width: 16px;
		height: 16px;
		z-index: 10;
		background: rgba(0, 0, 0, 0.5);
		border-radius: 8px;
		cursor: pointer;

		&:hover {
			background: rgba(0, 0, 0, 1);
		}
	`}(S||(S={}));exports.DiamonNodeWidget=class DiamonNodeWidget extends React.Component{render(){return React.createElement("div",{className:"diamond-node",style:{position:"relative",width:this.props.size,height:this.props.size}},React.createElement("svg",{width:this.props.size,height:this.props.size,dangerouslySetInnerHTML:{__html:`\n          <g id="Layer_1">\n          </g>\n          <g id="Layer_2">\n            <polygon fill="mediumpurple" stroke="${this.props.node.isSelected()?"white":"#000000"}" stroke-width="3" stroke-miterlimit="10" points="10,`+this.props.size/2+" "+this.props.size/2+",10 "+(this.props.size-10)+","+this.props.size/2+" "+this.props.size/2+","+(this.props.size-10)+' "/>\n          </g>\n        '}}),React.createElement(react_diagrams_1.PortWidget,{style:{top:this.props.size/2-8,left:-8,position:"absolute"},port:this.props.node.getPort(react_diagrams_1.PortModelAlignment.LEFT),engine:this.props.engine},React.createElement(S.Port,null)),React.createElement(react_diagrams_1.PortWidget,{style:{left:this.props.size/2-8,top:-8,position:"absolute"},port:this.props.node.getPort(react_diagrams_1.PortModelAlignment.TOP),engine:this.props.engine},React.createElement(S.Port,null)),React.createElement(react_diagrams_1.PortWidget,{style:{left:this.props.size-8,top:this.props.size/2-8,position:"absolute"},port:this.props.node.getPort(react_diagrams_1.PortModelAlignment.RIGHT),engine:this.props.engine},React.createElement(S.Port,null)),React.createElement(react_diagrams_1.PortWidget,{style:{left:this.props.size/2-8,top:this.props.size-8,position:"absolute"},port:this.props.node.getPort(react_diagrams_1.PortModelAlignment.BOTTOM),engine:this.props.engine},React.createElement(S.Port,null)))}}},1182:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_canvas_core_1=__webpack_require__(5);exports.SimplePortFactory=class SimplePortFactory extends react_canvas_core_1.AbstractModelFactory{constructor(type,cb){super(type),this.cb=cb}generateModel(event){return this.cb(event.initialConfig)}}},1183:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(10),React=__webpack_require__(0),react_canvas_core_1=__webpack_require__(5),DemoCanvasWidget_1=__webpack_require__(14);class AdvancedLinkModel extends react_diagrams_1.DefaultLinkModel{constructor(){super({type:"advanced",width:10})}}exports.AdvancedLinkModel=AdvancedLinkModel;class AdvancedPortModel extends react_diagrams_1.DefaultPortModel{createLinkModel(){return new AdvancedLinkModel}}exports.AdvancedPortModel=AdvancedPortModel;class AdvancedLinkSegment extends React.Component{constructor(props){super(props),this.percent=0}componentDidMount(){this.mounted=!0,this.callback=()=>{if(!this.circle||!this.path)return;this.percent+=2,this.percent>100&&(this.percent=0);let point=this.path.getPointAtLength(this.path.getTotalLength()*(this.percent/100));this.circle.setAttribute("cx",""+point.x),this.circle.setAttribute("cy",""+point.y),this.mounted&&requestAnimationFrame(this.callback)},requestAnimationFrame(this.callback)}componentWillUnmount(){this.mounted=!1}render(){return React.createElement(React.Fragment,null,React.createElement("path",{fill:"none",ref:ref=>{this.path=ref},strokeWidth:this.props.model.getOptions().width,stroke:"rgba(255,0,0,0.5)",d:this.props.path}),React.createElement("circle",{ref:ref=>{this.circle=ref},r:10,fill:"orange"}))}}exports.AdvancedLinkSegment=AdvancedLinkSegment;class AdvancedLinkFactory extends react_diagrams_1.DefaultLinkFactory{constructor(){super("advanced")}generateModel(){return new AdvancedLinkModel}generateLinkSegment(model,selected,path){return React.createElement("g",null,React.createElement(AdvancedLinkSegment,{model:model,path:path}))}}exports.AdvancedLinkFactory=AdvancedLinkFactory,exports.default=()=>{var engine=react_diagrams_1.default();engine.getLinkFactories().registerFactory(new AdvancedLinkFactory);var node1=new react_diagrams_1.DefaultNodeModel("Source","rgb(0,192,255)");let port1=node1.addPort(new AdvancedPortModel(!1,"out-1","Out thick")),port2=node1.addPort(new react_diagrams_1.DefaultPortModel(!1,"out-2","Out default"));node1.setPosition(100,100);var node2=new react_diagrams_1.DefaultNodeModel("Target","rgb(192,255,0)"),port3=node2.addPort(new AdvancedPortModel(!0,"in-1","In thick")),port4=node2.addPort(new react_diagrams_1.DefaultPortModel(!0,"in-2","In default"));node2.setPosition(300,100);var node3=new react_diagrams_1.DefaultNodeModel("Source","rgb(0,192,255)");node3.addPort(new AdvancedPortModel(!1,"out-1","Out thick")),node3.addPort(new react_diagrams_1.DefaultPortModel(!1,"out-2","Out default")),node3.setPosition(100,200);var node4=new react_diagrams_1.DefaultNodeModel("Target","rgb(192,255,0)");node4.addPort(new AdvancedPortModel(!0,"in-1","In thick")),node4.addPort(new react_diagrams_1.DefaultPortModel(!0,"in-2","In default")),node4.setPosition(300,200);var model=new react_diagrams_1.DiagramModel;return model.addAll(port1.link(port3),port2.link(port4)),model.addAll(node1,node2,node3,node4),engine.setModel(model),React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine}))}},1184:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(10),React=__webpack_require__(0),DemoWorkspaceWidget_1=__webpack_require__(59),react_canvas_core_1=__webpack_require__(5),DemoCanvasWidget_1=__webpack_require__(14);function createNode(name){return new react_diagrams_1.DefaultNodeModel(name,"rgb(0,192,255)")}let count=0;function connectNodes(nodeFrom,nodeTo,engine){count++;const portOut=nodeFrom.addPort(new react_diagrams_1.DefaultPortModel(!0,`${nodeFrom.name}-out-${count}`,"Out")),portTo=nodeTo.addPort(new react_diagrams_1.DefaultPortModel(!1,`${nodeFrom.name}-to-${count}`,"IN"));return portOut.link(portTo)}class DemoWidget extends React.Component{constructor(props){super(props),this.autoDistribute=()=>{this.engine.redistribute(this.props.model),this.reroute(),this.props.engine.repaintCanvas()},this.engine=new react_diagrams_1.DagreEngine({graph:{rankdir:"RL",ranker:"longest-path"},includeLinks:!0})}componentDidMount(){setTimeout(()=>{this.autoDistribute()},500)}reroute(){this.props.engine.getLinkFactories().getFactory(react_diagrams_1.PathFindingLinkFactory.NAME).calculateRoutingMatrix()}render(){return React.createElement(DemoWorkspaceWidget_1.DemoWorkspaceWidget,{buttons:React.createElement(DemoWorkspaceWidget_1.DemoButton,{onClick:this.autoDistribute},"Re-distribute")},React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:this.props.engine})))}}exports.default=()=>{let engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,nodesFrom=[],nodesTo=[];nodesFrom.push(createNode("from-1")),nodesFrom.push(createNode("from-2")),nodesFrom.push(createNode("from-3")),nodesTo.push(createNode("to-1")),nodesTo.push(createNode("to-2")),nodesTo.push(createNode("to-3"));let links=nodesFrom.map((node,index)=>connectNodes(node,nodesTo[index]));return links.push(connectNodes(nodesFrom[0],nodesTo[1])),links.push(connectNodes(nodesTo[0],nodesFrom[1])),links.push(connectNodes(nodesFrom[1],nodesTo[2])),nodesFrom.forEach((node,index)=>{node.setPosition(70*index,70*index),model.addNode(node)}),nodesTo.forEach((node,index)=>{node.setPosition(70*index,100),model.addNode(node)}),links.forEach(link=>{model.addLink(link)}),engine.setModel(model),React.createElement(DemoWidget,{model:model,engine:engine})}},14:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),styled_1=__webpack_require__(53);var S;!function(S){S.Container=styled_1.default.div`
		height: 100%;
		background-color: rgb(60, 60, 60) !important;
		background-size: 50px 50px;
		display: flex;

		> * {
			height: 100%;
			min-height: 100%;
			width: 100%;
		}
		background-image: linear-gradient(
				0deg,
				transparent 24%,
				${p=>p.color} 25%,
				${p=>p.color} 26%,
				transparent 27%,
				transparent 74%,
				${p=>p.color} 75%,
				${p=>p.color} 76%,
				transparent 77%,
				transparent
			),
			linear-gradient(
				90deg,
				transparent 24%,
				${p=>p.color} 25%,
				${p=>p.color} 26%,
				transparent 27%,
				transparent 74%,
				${p=>p.color} 75%,
				${p=>p.color} 76%,
				transparent 77%,
				transparent
			);
	`}(S||(S={}));exports.DemoCanvasWidget=class DemoCanvasWidget extends React.Component{render(){return React.createElement(S.Container,{background:this.props.background||"rgb(60, 60, 60)",color:this.props.color||"rgba(255,255,255, 0.05)"},this.props.children)}}},162:function(module,exports,__webpack_require__){window,module.exports=function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(4);class i{constructor(t,e){this.x=t,this.y=e}translate(t,e){this.x+=t,this.y+=e}clone(){return new i(this.x,this.y)}toSVG(){return this.x+" "+this.y}asMatrix(){return o.matrix([[this.x],[this.y],[1]])}transform(t){let e=o.multiply(t,this.asMatrix());this.x=e.get([0,0]),this.y=e.get([1,0])}static middlePoint(t,e){return new i((e.x+t.x)/2,(e.y+t.y)/2)}static multiply(...t){let e=t[0];for(let n=1;n<t.length;n++)e=o.multiply(e,t[n]);return e}static scaleMatrix(t,e){return o.matrix([[t,0,0],[0,e,0],[0,0,1]])}static translateMatrix(t,e){return o.matrix([[1,0,t],[0,1,e],[0,0,1]])}static rotateMatrix(t){return o.matrix([[Math.cos(t),-1*Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]])}static createScaleMatrix(t,e,n){return this.multiply(i.translateMatrix(n.x,n.y),i.scaleMatrix(t,e),i.translateMatrix(-n.x,-n.y))}static createRotateMatrix(t,e){return this.multiply(i.translateMatrix(e.x,e.y),i.rotateMatrix(t),i.translateMatrix(-e.x,-e.y))}}e.Point=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(0),i=n(5);class r{constructor(t=[]){this.points=t}serialize(){return i.map(this.points,t=>[t.x,t.y])}deserialize(t){this.points=i.map(t,t=>new o.Point(t[0],t[1]))}scale(t,e,n){let r=o.Point.createScaleMatrix(t,e,n);i.forEach(this.points,t=>{t.transform(r)})}transform(t){i.forEach(this.points,e=>{e.transform(t)})}setPoints(t){this.points=t}getPoints(){return this.points}rotate(t){this.transform(o.Point.createRotateMatrix(t/(180/Math.PI),this.getOrigin()))}translate(t,e){i.forEach(this.points,n=>{n.translate(t,e)})}doClone(t){this.points=i.map(t.points,t=>t.clone())}clone(){let t=Object.create(this);return t.doClone(this),t}getOrigin(){if(0===this.points.length)return null;let t=this.getBoundingBox();return o.Point.middlePoint(t.getTopLeft(),t.getBottomRight())}static boundingBoxFromPolygons(t){return r.boundingBoxFromPoints(i.flatMap(t,t=>t.getPoints()))}static boundingBoxFromPoints(t){if(0===t.length)return new s.Rectangle(0,0,0,0);let e=t[0].x,n=t[0].x,i=t[0].y,r=t[0].y;for(let o=1;o<t.length;o++)t[o].x<e&&(e=t[o].x),t[o].x>n&&(n=t[o].x),t[o].y<i&&(i=t[o].y),t[o].y>r&&(r=t[o].y);return new s.Rectangle(new o.Point(e,i),new o.Point(n,i),new o.Point(n,r),new o.Point(e,r))}getBoundingBox(){let t=this.points[0].x,e=this.points[0].x,n=this.points[0].y,i=this.points[0].y;for(let o=1;o<this.points.length;o++)this.points[o].x<t&&(t=this.points[o].x),this.points[o].x>e&&(e=this.points[o].x),this.points[o].y<n&&(n=this.points[o].y),this.points[o].y>i&&(i=this.points[o].y);return new s.Rectangle(new o.Point(t,n),new o.Point(e,n),new o.Point(e,i),new o.Point(t,i))}}e.Polygon=r;const s=n(2)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(0),i=n(1);class r extends i.Polygon{constructor(t=0,e=0,n=0,i=0){t instanceof o.Point&&e instanceof o.Point&&n instanceof o.Point&&i instanceof o.Point?super([t,e,n,i]):t instanceof o.Point?super([t,new o.Point(t.x+e,t.y),new o.Point(t.x+e,t.y+n),new o.Point(t.x,t.y+n)]):super(r.pointsFromBounds(t,e,n,i))}static pointsFromBounds(t,e,n,i){return[new o.Point(t,e),new o.Point(t+n,e),new o.Point(t+n,e+i),new o.Point(t,e+i)]}updateDimensions(t,e,n,o){this.points=r.pointsFromBounds(t,e,n,o)}setPoints(t){if(4!==t.length)throw"Rectangles must always have 4 points";super.setPoints(t)}containsPoint(t){const e=this.getTopLeft(),n=this.getBottomRight();return t.x>=e.x&&t.x<=n.x&&t.y>=e.y&&t.y<=n.y}getWidth(){return Math.sqrt(Math.pow(this.getTopLeft().x-this.getTopRight().x,2)+Math.pow(this.getTopLeft().y-this.getTopRight().y,2))}getHeight(){return Math.sqrt(Math.pow(this.getBottomLeft().x-this.getTopLeft().x,2)+Math.pow(this.getBottomLeft().y-this.getTopLeft().y,2))}getTopMiddle(){return o.Point.middlePoint(this.getTopLeft(),this.getTopRight())}getBottomMiddle(){return o.Point.middlePoint(this.getBottomLeft(),this.getBottomRight())}getLeftMiddle(){return o.Point.middlePoint(this.getBottomLeft(),this.getTopLeft())}getRightMiddle(){return o.Point.middlePoint(this.getBottomRight(),this.getTopRight())}getTopLeft(){return this.points[0]}getTopRight(){return this.points[1]}getBottomRight(){return this.points[2]}getBottomLeft(){return this.points[3]}}e.Rectangle=r},function(t,e,n){"use strict";function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),o(n(0)),o(n(1)),o(n(2)),o(n(6))},function(t,e){t.exports=__webpack_require__(1185)},function(t,e){t.exports=__webpack_require__(51)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(0),i=n(1);var r;!function(t){t[t.SOURCE=0]="SOURCE",t[t.SOURCE_CONTROL=1]="SOURCE_CONTROL",t[t.TARGET_CONTROL=2]="TARGET_CONTROL",t[t.TARGET=3]="TARGET"}(r=e.BezierCurvepPoints||(e.BezierCurvepPoints={})),e.BezierCurve=class extends i.Polygon{constructor(){super([new o.Point(0,0),new o.Point(0,0),new o.Point(0,0),new o.Point(0,0)])}getSVGCurve(){return`M${this.getSource().toSVG()} C${this.getSourceControl().toSVG()}, ${this.getTargetControl().toSVG()}, ${this.getTarget().toSVG()}`}setPoints(t){if(4!==t.length)throw new Error("BezierCurve must have extactly 4 points");super.setPoints(t)}getSource(){return this.points[r.SOURCE]}getSourceControl(){return this.points[r.SOURCE_CONTROL]}getTargetControl(){return this.points[r.TARGET_CONTROL]}getTarget(){return this.points[r.TARGET]}setSource(t){this.points[r.SOURCE]=t}setSourceControl(t){this.points[r.SOURCE_CONTROL]=t}setTargetControl(t){this.points[r.TARGET_CONTROL]=t}setTarget(t){this.points[r.TARGET]=t}}}])},240:function(module,exports,__webpack_require__){window,module.exports=function(e){var t={};function i(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(r,s,function(t){return e[t]}.bind(null,s));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=17)}([function(e,t){e.exports=__webpack_require__(5)},function(e,t){e.exports=__webpack_require__(51)},function(e,t){e.exports=__webpack_require__(0)},function(e,t){e.exports=__webpack_require__(162)},function(e,t){e.exports=__webpack_require__(53)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(1),s=i(3),o=i(0);!function(e){e.TOP="top",e.LEFT="left",e.BOTTOM="bottom",e.RIGHT="right"}(t.PortModelAlignment||(t.PortModelAlignment={})),t.PortModel=class extends o.BasePositionModel{constructor(e){super(e),this.links={},this.reportedPosition=!1}deserialize(e){super.deserialize(e),this.reportedPosition=!1,this.options.name=e.data.name,this.options.alignment=e.data.alignment}serialize(){return Object.assign({},super.serialize(),{name:this.options.name,alignment:this.options.alignment,parentNode:this.parent.getID(),links:r.map(this.links,e=>e.getID())})}setPosition(e,t){let i=this.position;super.setPosition(e,t),r.forEach(this.getLinks(),r=>{let s=r.getPointForPort(this);s.setPosition(s.getX()+e-i.x,s.getY()+t-i.y)})}doClone(e={},t){t.links={},t.parentNode=this.getParent().clone(e)}getNode(){return this.getParent()}getName(){return this.options.name}getMaximumLinks(){return this.options.maximumLinks}setMaximumLinks(e){this.options.maximumLinks=e}removeLink(e){delete this.links[e.getID()]}addLink(e){this.links[e.getID()]=e}getLinks(){return this.links}createLinkModel(){if(r.isFinite(this.options.maximumLinks)){var e=r.size(this.links);if(1===this.options.maximumLinks&&e>=1)return r.values(this.links)[0];if(e>=this.options.maximumLinks)return null}return null}reportPosition(){r.forEach(this.getLinks(),e=>{e.getPointForPort(this).setPosition(this.getCenter())}),this.fireEvent({entity:this},"reportInitialPosition")}getCenter(){return new s.Point(this.getX()+this.width/2,this.getY()+this.height/2)}updateCoords(e){this.width=e.getWidth(),this.height=e.getHeight(),this.setPosition(e.getTopLeft()),this.reportedPosition=!0,this.reportPosition()}canLinkToPort(e){return!0}isLocked(){return super.isLocked()||this.getParent().isLocked()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(7),s=i(1),o=i(3),n=i(0);t.LinkModel=class extends n.BaseModel{constructor(e){super(e),this.points=[new r.PointModel({link:this}),new r.PointModel({link:this})],this.sourcePort=null,this.targetPort=null,this.renderedPaths=[],this.labels=[]}getBoundingBox(){return o.Polygon.boundingBoxFromPoints(s.map(this.points,e=>e.getPosition()))}getSelectionEntities(){return this.getTargetPort()&&this.getSourcePort()?super.getSelectionEntities().concat(s.slice(this.points,1,this.points.length-1)):this.getSourcePort()?this.getTargetPort()?super.getSelectionEntities().concat(this.points):super.getSelectionEntities().concat(s.slice(this.points,1,this.points.length)):super.getSelectionEntities().concat(s.slice(this.points,0,this.points.length-1))}deserialize(e){super.deserialize(e),this.points=s.map(e.data.points||[],t=>{var i=new r.PointModel({link:this,position:new o.Point(t.x,t.y)});return i.deserialize(Object.assign({},e,{data:t})),i}),s.forEach(e.data.labels||[],t=>{let i=e.engine.getFactoryForLabel(t.type).generateModel({});i.deserialize(Object.assign({},e,{data:t})),this.addLabel(i)}),e.data.target&&e.getModel(e.data.targetPort).then(e=>{this.setTargetPort(e)}),e.data.source&&e.getModel(e.data.sourcePort).then(e=>{this.setSourcePort(e)})}getRenderedPath(){return this.renderedPaths}setRenderedPaths(e){this.renderedPaths=e}serialize(){return Object.assign({},super.serialize(),{source:this.sourcePort?this.sourcePort.getParent().getID():null,sourcePort:this.sourcePort?this.sourcePort.getID():null,target:this.targetPort?this.targetPort.getParent().getID():null,targetPort:this.targetPort?this.targetPort.getID():null,points:s.map(this.points,e=>e.serialize()),labels:s.map(this.labels,e=>e.serialize())})}doClone(e={},t){t.setPoints(s.map(this.getPoints(),t=>t.clone(e))),this.sourcePort&&t.setSourcePort(this.sourcePort.clone(e)),this.targetPort&&t.setTargetPort(this.targetPort.clone(e))}clearPort(e){this.sourcePort===e?this.setSourcePort(null):this.targetPort===e&&this.setTargetPort(null)}remove(){this.sourcePort&&this.sourcePort.removeLink(this),this.targetPort&&this.targetPort.removeLink(this),super.remove()}isLastPoint(e){return this.getPointIndex(e)===this.points.length-1}getPointIndex(e){return this.points.indexOf(e)}getPointModel(e){for(var t=0;t<this.points.length;t++)if(this.points[t].getID()===e)return this.points[t];return null}getPortForPoint(e){return null!==this.sourcePort&&this.getFirstPoint().getID()===e.getID()?this.sourcePort:null!==this.targetPort&&this.getLastPoint().getID()===e.getID()?this.targetPort:null}getPointForPort(e){return null!==this.sourcePort&&this.sourcePort.getID()===e.getID()?this.getFirstPoint():null!==this.targetPort&&this.targetPort.getID()===e.getID()?this.getLastPoint():null}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}setSourcePort(e){null!==e&&e.addLink(this),null!==this.sourcePort&&this.sourcePort.removeLink(this),this.sourcePort=e,this.fireEvent({port:e},"sourcePortChanged")}getSourcePort(){return this.sourcePort}getTargetPort(){return this.targetPort}setTargetPort(e){null!==e&&e.addLink(this),null!==this.targetPort&&this.targetPort.removeLink(this),this.targetPort=e,this.fireEvent({port:e},"targetPortChanged")}point(e,t){return this.addPoint(this.generatePoint(e,t))}addLabel(e){e.setParent(this),this.labels.push(e)}getPoints(){return this.points}getLabels(){return this.labels}setPoints(e){s.forEach(e,e=>{e.setParent(this)}),this.points=e}removePoint(e){this.points.splice(this.getPointIndex(e),1)}removePointsBefore(e){this.points.splice(0,this.getPointIndex(e))}removePointsAfter(e){this.points.splice(this.getPointIndex(e)+1)}removeMiddlePoints(){this.points.length>2&&this.points.splice(0,this.points.length-2)}addPoint(e,t=1){return e.setParent(this),this.points.splice(t,0,e),e}generatePoint(e=0,t=0){return new r.PointModel({link:this,position:new o.Point(e,t)})}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(0);t.PointModel=class extends r.BasePositionModel{constructor(e){super(Object.assign({},e,{type:"point"})),this.parent=e.link}isConnectedToPort(){return null!==this.parent.getPortForPoint(this)}getLink(){return this.getParent()}remove(){this.parent&&this.parent.removePoint(this),super.remove()}isLocked(){return super.isLocked()||this.getParent().isLocked()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(1),s=i(3),o=i(0);t.NodeModel=class extends o.BasePositionModel{constructor(e){super(e),this.ports={},this.width=0,this.height=0}getBoundingBox(){return new s.Rectangle(this.getPosition(),this.width,this.height)}setPosition(e,t){let i=this.position;super.setPosition(e,t),r.forEach(this.ports,r=>{r.setPosition(r.getX()+e-i.x,r.getY()+t-i.y)})}deserialize(e){super.deserialize(e),r.forEach(e.data.ports,t=>{let i=e.engine.getFactoryForPort(t.type).generateModel({});i.deserialize(Object.assign({},e,{data:t})),e.registerModel(i),this.addPort(i)})}serialize(){return Object.assign({},super.serialize(),{ports:r.map(this.ports,e=>e.serialize())})}doClone(e={},t){t.ports={},r.forEach(this.ports,i=>{t.addPort(i.clone(e))})}remove(){super.remove(),r.forEach(this.ports,e=>{r.forEach(e.getLinks(),e=>{e.remove()})})}getPortFromID(e){for(var t in this.ports)if(this.ports[t].getID()===e)return this.ports[t];return null}getLink(e){for(let t in this.ports){const i=this.ports[t].getLinks();if(i[e])return i[e]}}getPort(e){return this.ports[e]}getPorts(){return this.ports}removePort(e){for(let t of r.values(e.getLinks()))t.clearPort(e);this.ports[e.getName()]&&(this.ports[e.getName()].setParent(null),delete this.ports[e.getName()])}addPort(e){return e.setParent(this),this.ports[e.getName()]=e,e}updateDimensions({width:e,height:t}){this.width=e,this.height=t}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(0),s=i(8);t.NodeLayerModel=class extends r.LayerModel{constructor(){super({type:"diagram-nodes",isSvg:!1,transformed:!0})}addModel(e){if(!(e instanceof s.NodeModel))throw new Error("Can only add nodes to this layer");super.addModel(e)}getChildModelFactoryBank(e){return e.getNodeFactories()}getNodes(){return this.getModels()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(0),s=i(6);t.LinkLayerModel=class extends r.LayerModel{constructor(){super({type:"diagram-links",isSvg:!0,transformed:!0})}addModel(e){if(!(e instanceof s.LinkModel))throw new Error("Can only add links to this layer");super.addModel(e)}getLinks(){return this.getModels()}getChildModelFactoryBank(e){return e.getLinkFactories()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(2),s=i(1),o=i(20),n=i(0);t.LinkWidget=class extends r.Component{constructor(e){super(e),this.state={sourcePort:null,targetPort:null}}componentWillUnmount(){this.sourceListener&&this.sourceListener.deregister(),this.targetListener&&this.targetListener.deregister()}static getDerivedStateFromProps(e,t){return{sourcePort:e.link.getSourcePort(),targetPort:e.link.getTargetPort()}}installTarget(){this.targetListener&&this.targetListener.deregister(),this.targetListener=this.props.link.getTargetPort().registerListener({reportInitialPosition:e=>{this.forceUpdate()}})}installSource(){this.sourceListener&&this.sourceListener.deregister(),this.sourceListener=this.props.link.getSourcePort().registerListener({reportInitialPosition:e=>{this.forceUpdate()}})}componentDidUpdate(e,t,i){t.sourcePort!==this.state.sourcePort&&this.installSource(),t.targetPort!==this.state.targetPort&&this.installTarget()}static generateLinePath(e,t){return`M${e.getX()},${e.getY()} L ${t.getX()},${t.getY()}`}componentDidMount(){this.props.link.getSourcePort()&&this.installSource(),this.props.link.getTargetPort()&&this.installTarget()}render(){const{link:e}=this.props;return e.getSourcePort()&&!e.getSourcePort().reportedPosition?null:e.getTargetPort()&&!e.getTargetPort().reportedPosition?null:r.createElement(n.PeformanceWidget,{model:this.props.link,serialized:this.props.link.serialize()},()=>r.createElement("g",{"data-linkid":this.props.link.getID()},this.props.diagramEngine.generateWidgetForLink(e),s.map(this.props.link.getLabels(),(e,t)=>r.createElement(o.LabelWidget,{key:e.getID(),engine:this.props.diagramEngine,label:e,index:t}))))}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(2),s=i(4),o=i(1),n=i(11);var a;!function(e){e.Container=s.default.div``}(a||(a={})),t.LinkLayerWidget=class extends r.Component{render(){return r.createElement(r.Fragment,null,o.map(this.props.layer.getLinks(),e=>r.createElement(n.LinkWidget,{key:e.getID(),link:e,diagramEngine:this.props.engine})))}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(2),s=i(4),o=i(1),n=i(14);var a;!function(e){e.Container=s.default.div``}(a||(a={})),t.NodeLayerWidget=class extends r.Component{render(){return r.createElement(r.Fragment,null,o.map(this.props.layer.getNodes(),e=>r.createElement(n.NodeWidget,{key:e.getID(),diagramEngine:this.props.engine,node:e})))}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(2),s=i(1),o=i(0),n=i(4);var a;!function(e){e.Node=n.default.div`
		position: absolute;
		-webkit-touch-callout: none; /* iOS Safari */
		-webkit-user-select: none; /* Chrome/Safari/Opera */
		user-select: none;
		cursor: move;
		pointer-events: all;
	`}(a||(a={})),t.NodeWidget=class extends r.Component{constructor(e){super(e),this.ref=r.createRef()}componentWillUnmount(){this.ob.disconnect(),this.ob=null}componentDidUpdate(e,t,i){this.listener&&this.props.node!==e.node&&(this.listener.deregister(),this.installSelectionListener())}installSelectionListener(){this.listener=this.props.node.registerListener({selectionChanged:e=>{this.forceUpdate()}})}componentDidMount(){this.ob=new ResizeObserver(e=>{const t=e[0].contentRect;this.props.node.updateDimensions({width:t.width,height:t.height}),s.forEach(this.props.node.getPorts(),e=>{e.updateCoords(this.props.diagramEngine.getPortCoords(e))})}),this.ob.observe(this.ref.current),this.installSelectionListener()}render(){return r.createElement(o.PeformanceWidget,{model:this.props.node,serialized:this.props.node.serialize()},()=>r.createElement(a.Node,{className:"node",ref:this.ref,"data-nodeid":this.props.node.getID(),style:{top:this.props.node.getY(),left:this.props.node.getX()}},this.props.diagramEngine.generateWidgetForNode(this.props.node)))}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(0),s=i(5);t.DragNewLinkState=class extends r.AbstractDisplacementState{constructor(e={}){super({name:"drag-new-link"}),this.config=Object.assign({allowLooseLinks:!0,allowLinksFromLockedPorts:!1},e),this.registerAction(new r.Action({type:r.InputType.MOUSE_DOWN,fire:e=>{this.port=this.engine.getMouseElement(e.event),this.config.allowLinksFromLockedPorts||!this.port.isLocked()?(this.link=this.port.createLinkModel(),this.link?(this.link.setSelected(!0),this.link.setSourcePort(this.port),this.engine.getModel().addLink(this.link),this.port.reportPosition()):this.eject()):this.eject()}})),this.registerAction(new r.Action({type:r.InputType.MOUSE_UP,fire:e=>{const t=this.engine.getMouseElement(e.event);if(t instanceof s.PortModel&&this.port.canLinkToPort(t))return this.link.setTargetPort(t),t.reportPosition(),void this.engine.repaintCanvas();this.config.allowLooseLinks||(this.link.remove(),this.engine.repaintCanvas())}}))}fireMouseMoved(e){const t=this.port.getPosition();this.link.getLastPoint().setPosition(t.x+e.virtualDisplacementX,t.y+e.virtualDisplacementY),this.engine.repaintCanvas()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(0),s=i(1),o=i(7),n=i(5);t.DragDiagramItemsState=class extends r.MoveItemsState{constructor(){super(),this.registerAction(new r.Action({type:r.InputType.MOUSE_UP,fire:e=>{const t=this.engine.getMouseElement(e.event);t instanceof n.PortModel&&s.forEach(this.initialPositions,e=>{if(e.item instanceof o.PointModel){const i=e.item.getParent();if(i.getLastPoint()!==e.item)return;i.setTargetPort(t),t.reportPosition(),this.engine.repaintCanvas()}})}}))}}},function(e,t,i){"use strict";function r(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),r(i(18)),r(i(19)),r(i(6)),r(i(7)),r(i(11)),r(i(10)),r(i(12)),r(i(21)),r(i(9)),r(i(13)),r(i(22)),r(i(8)),r(i(14)),r(i(5)),r(i(23)),r(i(24)),r(i(16)),r(i(15)),r(i(25))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(1),s=i(6),o=i(8),n=i(0),a=i(9),l=i(10);t.DiagramModel=class extends n.CanvasModel{constructor(e={}){super(e),this.addLayer(new l.LinkLayerModel),this.addLayer(new a.NodeLayerModel)}deserialize(e){this.layers=[],super.deserialize(e)}addLayer(e){super.addLayer(e),e instanceof a.NodeLayerModel&&(this.activeNodeLayer=e),e instanceof l.LinkLayerModel&&(this.activeLinkLayer=e)}getLinkLayers(){return r.filter(this.layers,e=>e instanceof l.LinkLayerModel)}getNodeLayers(){return r.filter(this.layers,e=>e instanceof a.NodeLayerModel)}getActiveNodeLayer(){if(!this.activeNodeLayer){const e=this.getNodeLayers();0===e.length?this.addLayer(new a.NodeLayerModel):this.activeNodeLayer=e[0]}return this.activeNodeLayer}getActiveLinkLayer(){if(!this.activeLinkLayer){const e=this.getLinkLayers();0===e.length?this.addLayer(new a.NodeLayerModel):this.activeLinkLayer=e[0]}return this.activeLinkLayer}getNode(e){for(const t of this.getNodeLayers()){const i=t.getModel(e);if(i)return i}}getLink(e){for(const t of this.getLinkLayers()){const i=t.getModel(e);if(i)return i}}addAll(...e){return r.forEach(e,e=>{e instanceof s.LinkModel?this.addLink(e):e instanceof o.NodeModel&&this.addNode(e)}),e}addLink(e){return e.registerListener({entityRemoved:()=>{this.removeLink(e)}}),this.getActiveLinkLayer().addModel(e),this.fireEvent({link:e,isCreated:!0},"linksUpdated"),e}addNode(e){return e.registerListener({entityRemoved:()=>{this.removeNode(e)}}),this.getActiveNodeLayer().addModel(e),this.fireEvent({node:e,isCreated:!0},"nodesUpdated"),e}removeLink(e){r.some(this.getLinkLayers(),t=>t.removeModel(e))&&this.fireEvent({link:e,isCreated:!1},"linksUpdated")}removeNode(e){r.some(this.getNodeLayers(),t=>t.removeModel(e))&&this.fireEvent({node:e,isCreated:!1},"nodesUpdated")}getLinks(){return r.flatMap(this.getLinkLayers(),e=>r.values(e.getModels()))}getNodes(){return r.flatMap(this.getNodeLayers(),e=>r.values(e.getModels()))}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(0);t.LabelModel=class extends r.BaseModel{constructor(e){super(Object.assign({},e,{offsetX:e.offsetX||0,offsetY:e.offsetY||0}))}deserialize(e){super.deserialize(e),this.options.offsetX=e.data.offsetX,this.options.offsetY=e.data.offsetY}serialize(){return Object.assign({},super.serialize(),{offsetX:this.options.offsetX,offsetY:this.options.offsetY})}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(2),s=i(4);var o;!function(e){e.Label=s.default.div`
		display: inline-block;
		position: absolute;
	`,e.Foreign=s.default.foreignObject`
		pointer-events: none;
		overflow: visible;
	`}(o||(o={})),t.LabelWidget=class extends r.Component{constructor(e){super(e),this.findPathAndRelativePositionToRenderLabel=e=>{const t=this.props.label.getParent(),i=t.getRenderedPath().map(e=>e.getTotalLength());let r=i.reduce((e,t)=>e+t,0)*(e/(t.getLabels().length+1)),s=0;for(;s<t.getRenderedPath().length;){if(r-i[s]<0)return{path:t.getRenderedPath()[s],position:r};r-=i[s],s++}},this.calculateLabelPosition=()=>{const e=this.findPathAndRelativePositionToRenderLabel(this.props.index+1);if(!e)return;const{path:t,position:i}=e,r=this.ref.current.offsetWidth,s=this.ref.current.offsetHeight,o=t.getPointAtLength(i),n=o.x-r/2+this.props.label.getOptions().offsetX,a=o.y-s/2+this.props.label.getOptions().offsetY;this.ref.current.style.transform=`translate(${n}px, ${a}px)`},this.ref=r.createRef()}componentDidUpdate(){window.requestAnimationFrame(this.calculateLabelPosition)}componentDidMount(){window.requestAnimationFrame(this.calculateLabelPosition)}render(){const e=this.props.engine.getCanvas();return r.createElement(o.Foreign,{key:this.props.label.getID(),width:e.offsetWidth,height:e.offsetHeight},r.createElement(o.Label,{ref:this.ref},this.props.engine.getFactoryForLabel(this.props.label).generateReactWidget({model:this.props.label})))}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(2),s=i(0),o=i(10),n=i(12);t.LinkLayerFactory=class extends s.AbstractReactFactory{constructor(){super("diagram-links")}generateModel(e){return new o.LinkLayerModel}generateReactWidget(e){return r.createElement(n.LinkLayerWidget,{layer:e.model,engine:this.engine})}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(2),s=i(0),o=i(9),n=i(13);t.NodeLayerFactory=class extends s.AbstractReactFactory{constructor(){super("diagram-nodes")}generateModel(e){return new o.NodeLayerModel}generateReactWidget(e){return r.createElement(n.NodeLayerWidget,{layer:e.model,engine:this.engine})}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(2),s=i(1),o=i(0);t.PortWidget=class extends r.Component{constructor(e){super(e),this.ref=r.createRef()}report(){this.props.port.updateCoords(this.props.engine.getPortCoords(this.props.port,this.ref.current))}componentWillUnmount(){this.engineListenerHandle&&this.engineListenerHandle.deregister()}componentDidUpdate(e,t,i){this.props.port.reportedPosition||this.report()}componentDidMount(){this.engineListenerHandle=this.props.engine.registerListener({canvasReady:()=>{this.report()}}),this.props.engine.getCanvas()&&this.report()}getExtraProps(){return o.Toolkit.TESTING?{"data-links":s.keys(this.props.port.getNode().getPort(this.props.port.getName()).links).join(",")}:{}}render(){return r.createElement("div",Object.assign({style:this.props.style,ref:this.ref,className:`port ${this.props.className||""}`,"data-name":this.props.port.getName(),"data-nodeid":this.props.port.getNode().getID()},this.getExtraProps()),this.props.children)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(0),s=i(5),o=i(15),n=i(16);t.DefaultDiagramState=class extends r.State{constructor(){super({name:"default-diagrams"}),this.childStates=[new r.SelectingState],this.dragCanvas=new r.DragCanvasState,this.dragNewLink=new o.DragNewLinkState,this.dragItems=new n.DragDiagramItemsState,this.registerAction(new r.Action({type:r.InputType.MOUSE_DOWN,fire:e=>{const t=this.engine.getActionEventBus().getModelForEvent(e);t?t instanceof s.PortModel?this.transitionWithEvent(this.dragNewLink,e):this.transitionWithEvent(this.dragItems,e):this.transitionWithEvent(this.dragCanvas,e)}}))}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(3),s=i(0);t.DiagramEngine=class extends s.CanvasEngine{constructor(){super(),this.maxNumberPointsPerLink=1e3,this.nodeFactories=new s.FactoryBank,this.linkFactories=new s.FactoryBank,this.portFactories=new s.FactoryBank,this.labelFactories=new s.FactoryBank;const e=e=>{e.registerListener({factoryAdded:e=>{e.factory.setDiagramEngine(this)},factoryRemoved:e=>{e.factory.setDiagramEngine(null)}})};e(this.nodeFactories),e(this.linkFactories),e(this.portFactories),e(this.labelFactories)}getMouseElement(e){var t=e.target,i=this.model,r=s.Toolkit.closest(t,".port[data-name]");if(r){var o=s.Toolkit.closest(t,".node[data-nodeid]");return i.getNode(o.getAttribute("data-nodeid")).getPort(r.getAttribute("data-name"))}return(r=s.Toolkit.closest(t,".point[data-id]"))?i.getLink(r.getAttribute("data-linkid")).getPointModel(r.getAttribute("data-id")):(r=s.Toolkit.closest(t,"[data-linkid]"))?i.getLink(r.getAttribute("data-linkid")):(r=s.Toolkit.closest(t,".node[data-nodeid]"))?i.getNode(r.getAttribute("data-nodeid")):null}
//!-------------- FACTORIES ------------
getNodeFactories(){return this.nodeFactories}getLinkFactories(){return this.linkFactories}getLabelFactories(){return this.labelFactories}getPortFactories(){return this.portFactories}getFactoryForNode(e){return"string"==typeof e?this.nodeFactories.getFactory(e):this.nodeFactories.getFactory(e.getType())}getFactoryForLink(e){return"string"==typeof e?this.linkFactories.getFactory(e):this.linkFactories.getFactory(e.getType())}getFactoryForLabel(e){return"string"==typeof e?this.labelFactories.getFactory(e):this.labelFactories.getFactory(e.getType())}getFactoryForPort(e){return"string"==typeof e?this.portFactories.getFactory(e):this.portFactories.getFactory(e.getType())}generateWidgetForLink(e){return this.getFactoryForLink(e).generateReactWidget({model:e})}generateWidgetForNode(e){return this.getFactoryForNode(e).generateReactWidget({model:e})}getNodeElement(e){const t=this.canvas.querySelector(`.node[data-nodeid="${e.getID()}"]`);if(null===t)throw new Error("Cannot find Node element with nodeID: ["+e.getID()+"]");return t}getNodePortElement(e){var t=this.canvas.querySelector(`.port[data-name="${e.getName()}"][data-nodeid="${e.getParent().getID()}"]`);if(null===t)throw new Error("Cannot find Node Port element with nodeID: ["+e.getParent().getID()+"] and name: ["+e.getName()+"]");return t}getPortCenter(e){return this.getPortCoords(e).getOrigin()}getPortCoords(e,t){if(!this.canvas)throw new Error("Canvas needs to be set first");t||(t=this.getNodePortElement(e));const i=t.getBoundingClientRect(),s=this.getRelativeMousePoint({clientX:i.left,clientY:i.top}),o=this.model.getZoomLevel()/100;return new r.Rectangle(s.x,s.y,i.width/o,i.height/o)}getNodeDimensions(e){if(!this.canvas)return{width:0,height:0};const t=this.getNodeElement(e).getBoundingClientRect();return{width:t.width,height:t.height}}getMaxNumberPointsPerLink(){return this.maxNumberPointsPerLink}setMaxNumberPointsPerLink(e){this.maxNumberPointsPerLink=e}}}])},404:function(module,exports,__webpack_require__){window,module.exports=function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=15)}([function(e,t){e.exports=__webpack_require__(0)},function(e,t){e.exports=__webpack_require__(240)},function(e,t){e.exports=__webpack_require__(53)},function(e,t){e.exports=__webpack_require__(5)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(1);t.DefaultLabelModel=class extends n.LabelModel{constructor(e={}){super(Object.assign({},e,{offsetY:null==e.offsetY?-23:e.offsetY,type:"default"}))}setLabel(e){this.options.label=e}deserialize(e){super.deserialize(e),this.options.label=e.data.label}serialize(){return Object.assign({},super.serialize(),{label:this.options.label})}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(1),r=o(4),s=o(18);t.DefaultLinkModel=class extends n.LinkModel{constructor(e={}){super(Object.assign({type:"default",width:e.width||3,color:e.color||"gray",selectedColor:e.selectedColor||"rgb(0,192,255)",curvyness:50},e))}calculateControlOffset(e){return e.getOptions().alignment===n.PortModelAlignment.RIGHT?[this.options.curvyness,0]:e.getOptions().alignment===n.PortModelAlignment.LEFT?[-this.options.curvyness,0]:e.getOptions().alignment===n.PortModelAlignment.TOP?[0,-this.options.curvyness]:[0,this.options.curvyness]}getSVGPath(){if(2==this.points.length){const e=new s.BezierCurve;return e.setSource(this.getFirstPoint().getPosition()),e.setTarget(this.getLastPoint().getPosition()),e.setSourceControl(this.getFirstPoint().getPosition().clone()),e.setTargetControl(this.getLastPoint().getPosition().clone()),this.sourcePort&&e.getSourceControl().translate(...this.calculateControlOffset(this.getSourcePort())),this.targetPort&&e.getTargetControl().translate(...this.calculateControlOffset(this.getTargetPort())),e.getSVGCurve()}}serialize(){return Object.assign({},super.serialize(),{width:this.options.width,color:this.options.color,curvyness:this.options.curvyness,selectedColor:this.options.selectedColor})}deserialize(e){super.deserialize(e),this.options.color=e.data.color,this.options.width=e.data.width,this.options.curvyness=e.data.curvyness,this.options.selectedColor=e.data.selectedColor}addLabel(e){if(e instanceof n.LabelModel)return super.addLabel(e);let t=new r.DefaultLabelModel;return t.setLabel(e),super.addLabel(t)}setWidth(e){this.options.width=e,this.fireEvent({width:e},"widthChanged")}setColor(e){this.options.color=e,this.fireEvent({color:e},"colorChanged")}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(1),r=o(5);class s extends n.PortModel{constructor(e,t,o){t&&(e={in:!!e,name:t,label:o}),e=e,super(Object.assign({label:e.label||e.name,alignment:e.in?n.PortModelAlignment.LEFT:n.PortModelAlignment.RIGHT,type:"default"},e))}deserialize(e){super.deserialize(e),this.options.in=e.data.in,this.options.label=e.data.label}serialize(){return Object.assign({},super.serialize(),{in:this.options.in,label:this.options.label})}link(e,t){let o=this.createLinkModel(t);return o.setSourcePort(this),o.setTargetPort(e),o}canLinkToPort(e){return!(e instanceof s)||this.options.in!==e.getOptions().in}createLinkModel(e){let t=super.createLinkModel();return!t&&e?e.generateModel({}):t||new r.DefaultLinkModel}}t.DefaultPortModel=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),r=o(2);var s;!function(e){e.Label=r.default.div`
		background: rgba(0, 0, 0, 0.8);
		border-radius: 5px;
		color: white;
		font-size: 12px;
		padding: 4px 8px;
		font-family: sans-serif;
		user-select: none;
	`}(s||(s={})),t.DefaultLabelWidget=class extends n.Component{render(){return n.createElement(s.Label,null,this.props.model.getOptions().label)}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),r=o(1),s=o(9),i=o(10);t.DefaultLinkWidget=class extends n.Component{constructor(e){super(e),this.refPaths=[],this.state={selected:!1}}componentDidUpdate(){this.props.link.setRenderedPaths(this.refPaths.map(e=>e.current))}componentDidMount(){this.props.link.setRenderedPaths(this.refPaths.map(e=>e.current))}componentWillUnmount(){this.props.link.setRenderedPaths([])}addPointToLink(e,t){if(!e.shiftKey&&!this.props.link.isLocked()&&this.props.link.getPoints().length-1<=this.props.diagramEngine.getMaxNumberPointsPerLink()){const o=new r.PointModel({link:this.props.link,position:this.props.diagramEngine.getRelativeMousePoint(e)});this.props.link.addPoint(o,t),e.persist(),e.stopPropagation(),this.forceUpdate(()=>{this.props.diagramEngine.getActionEventBus().fireAction({event:e,model:o})})}}generatePoint(e){return n.createElement(s.DefaultLinkPointWidget,{key:e.getID(),point:e,colorSelected:this.props.link.getOptions().selectedColor,color:this.props.link.getOptions().color})}generateLink(e,t,o){const r=n.createRef();return this.refPaths.push(r),n.createElement(i.DefaultLinkSegmentWidget,{key:`link-${o}`,path:e,selected:this.state.selected,diagramEngine:this.props.diagramEngine,factory:this.props.diagramEngine.getFactoryForLink(this.props.link),link:this.props.link,forwardRef:r,onSelection:e=>{this.setState({selected:e})},extras:t})}render(){var e=this.props.link.getPoints(),t=[];if(this.refPaths=[],2===e.length)t.push(this.generateLink(this.props.link.getSVGPath(),{onMouseDown:e=>{this.addPointToLink(e,1)}},"0")),null==this.props.link.getTargetPort()&&t.push(this.generatePoint(e[1]));else{for(let o=0;o<e.length-1;o++)t.push(this.generateLink(r.LinkWidget.generateLinePath(e[o],e[o+1]),{"data-linkid":this.props.link.getID(),"data-point":o,onMouseDown:e=>{this.addPointToLink(e,o+1)}},o));for(let o=1;o<e.length-1;o++)t.push(this.generatePoint(e[o]));null==this.props.link.getTargetPort()&&t.push(this.generatePoint(e[e.length-1]))}return n.createElement("g",{"data-default-link-test":this.props.link.getOptions().testName},t)}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),r=o(2);var s;!function(e){e.PointTop=r.default.circle`
		pointer-events: all;
	`}(s||(s={})),t.DefaultLinkPointWidget=class extends n.Component{constructor(e){super(e),this.state={selected:!1}}render(){const{point:e}=this.props;return n.createElement("g",null,n.createElement("circle",{cx:e.getPosition().x,cy:e.getPosition().y,r:5,fill:this.state.selected||this.props.point.isSelected()?this.props.colorSelected:this.props.color}),n.createElement(s.PointTop,{className:"point",onMouseLeave:()=>{this.setState({selected:!1})},onMouseEnter:()=>{this.setState({selected:!0})},"data-id":e.getID(),"data-linkid":e.getLink().getID(),cx:e.getPosition().x,cy:e.getPosition().y,r:15,opacity:0}))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);t.DefaultLinkSegmentWidget=class extends n.Component{render(){const e=n.cloneElement(this.props.factory.generateLinkSegment(this.props.link,this.props.selected||this.props.link.isSelected(),this.props.path),{ref:this.props.forwardRef}),t=n.cloneElement(e,Object.assign({},this.props.extras,{strokeLinecap:"round",onMouseLeave:()=>{this.props.onSelection(!1)},onMouseEnter:()=>{this.props.onSelection(!0)},ref:null,"data-linkid":this.props.link.getID(),strokeOpacity:this.props.selected?.1:0,strokeWidth:20,fill:"none",onContextMenu:()=>{this.props.link.isLocked()||(event.preventDefault(),this.props.link.remove())}}));return n.createElement("g",null,e,t)}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(12),r=o(1),s=o(6);t.DefaultNodeModel=class extends r.NodeModel{constructor(e={},t){"string"==typeof e&&(e={name:e,color:t}),super(Object.assign({type:"default",name:"Untitled",color:"rgb(0,192,255)"},e)),this.portsOut=[],this.portsIn=[]}doClone(e,t){t.portsIn=[],t.portsOut=[],super.doClone(e,t)}removePort(e){super.removePort(e),e.getOptions().in?this.portsIn.splice(this.portsIn.indexOf(e)):this.portsOut.splice(this.portsOut.indexOf(e))}addPort(e){return super.addPort(e),e.getOptions().in?-1===this.portsIn.indexOf(e)&&this.portsIn.push(e):-1===this.portsOut.indexOf(e)&&this.portsOut.push(e),e}addInPort(e,t=!0){const o=new s.DefaultPortModel({in:!0,name:e,label:e,alignment:r.PortModelAlignment.LEFT});return t||this.portsIn.splice(0,0,o),this.addPort(o)}addOutPort(e,t=!0){const o=new s.DefaultPortModel({in:!1,name:e,label:e,alignment:r.PortModelAlignment.RIGHT});return t||this.portsOut.splice(0,0,o),this.addPort(o)}deserialize(e){super.deserialize(e),this.options.name=e.data.name,this.options.color=e.data.color,this.portsIn=n.map(e.data.portsInOrder,e=>this.getPortFromID(e)),this.portsOut=n.map(e.data.portsOutOrder,e=>this.getPortFromID(e))}serialize(){return Object.assign({},super.serialize(),{name:this.options.name,color:this.options.color,portsInOrder:n.map(this.portsIn,e=>e.getID()),portsOutOrder:n.map(this.portsOut,e=>e.getID())})}getInPorts(){return this.portsIn}getOutPorts(){return this.portsOut}}},function(e,t){e.exports=__webpack_require__(51)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),r=o(12),s=o(14),i=o(2);var l;!function(e){e.Node=i.default.div`
		background-color: ${e=>e.background};
		border-radius: 5px;
		font-family: sans-serif;
		color: white;
		border: solid 2px black;
		overflow: visible;
		font-size: 11px;
		border: solid 2px ${e=>e.selected?"rgb(0,192,255)":"black"};
	`,e.Title=i.default.div`
		background: rgba(0, 0, 0, 0.3);
		display: flex;
		white-space: nowrap;
		justify-items: center;
	`,e.TitleName=i.default.div`
		flex-grow: 1;
		padding: 5px 5px;
	`,e.Ports=i.default.div`
		display: flex;
		background-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));
	`,e.PortsContainer=i.default.div`
		flex-grow: 1;
		display: flex;
		flex-direction: column;

		&:first-child {
			margin-right: 10px;
		}

		&:only-child {
			margin-right: 0px;
		}
	`}(l||(l={})),t.DefaultNodeWidget=class extends n.Component{constructor(){super(...arguments),this.generatePort=e=>n.createElement(s.DefaultPortLabel,{engine:this.props.engine,port:e,key:e.id})}render(){return n.createElement(l.Node,{"data-default-node-name":this.props.node.getOptions().name,selected:this.props.node.isSelected(),background:this.props.node.getOptions().color},n.createElement(l.Title,null,n.createElement(l.TitleName,null,this.props.node.getOptions().name)),n.createElement(l.Ports,null,n.createElement(l.PortsContainer,null,r.map(this.props.node.getInPorts(),this.generatePort)),n.createElement(l.PortsContainer,null,r.map(this.props.node.getOutPorts(),this.generatePort))))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),r=o(1),s=o(2);var i;!function(e){e.PortLabel=s.default.div`
		display: flex;
		margin-top: 1px;
		align-items: center;
	`,e.Label=s.default.div`
		padding: 0 5px;
		flex-grow: 1;
	`,e.Port=s.default.div`
		width: 15px;
		height: 15px;
		background: rgba(white, 0.1);

		&:hover {
			background: rgb(192, 255, 0);
		}
	`}(i||(i={})),t.DefaultPortLabel=class extends n.Component{render(){const e=n.createElement(r.PortWidget,{engine:this.props.engine,port:this.props.port},n.createElement(i.Port,null)),t=n.createElement(i.Label,null,this.props.port.getOptions().label);return n.createElement(i.PortLabel,null,this.props.port.getOptions().in?e:t,this.props.port.getOptions().in?t:e)}}},function(e,t,o){"use strict";function n(e){for(var o in e)t.hasOwnProperty(o)||(t[o]=e[o])}Object.defineProperty(t,"__esModule",{value:!0}),n(o(16)),n(o(4)),n(o(7)),n(o(17)),n(o(5)),n(o(8)),n(o(10)),n(o(9)),n(o(20)),n(o(11)),n(o(13)),n(o(21)),n(o(14)),n(o(6))},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),r=o(4),s=o(7),i=o(3);t.DefaultLabelFactory=class extends i.AbstractReactFactory{constructor(){super("default")}generateReactWidget(e){return n.createElement(s.DefaultLabelWidget,{model:e.model})}generateModel(e){return new r.DefaultLabelModel}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),r=o(5),s=o(8),i=o(2),l=o(19),a=o(3);var d;!function(e){e.Keyframes=l.keyframes`
		from {
			stroke-dashoffset: 24;
		}
		to {
			stroke-dashoffset: 0;
		}
	`;const t=l.css`
		stroke-dasharray: 10, 2;
		animation: ${e.Keyframes} 1s linear infinite;
	`;e.Path=i.default.path`
		${e=>e.selected&&t};
		fill: none;
		pointer-events: all;
	`}(d||(d={})),t.DefaultLinkFactory=class extends a.AbstractReactFactory{constructor(e="default"){super(e)}generateReactWidget(e){return n.createElement(s.DefaultLinkWidget,{link:e.model,diagramEngine:this.engine})}generateModel(e){return new r.DefaultLinkModel}generateLinkSegment(e,t,o){return n.createElement(d.Path,{selected:t,stroke:t?e.getOptions().selectedColor:e.getOptions().color,strokeWidth:e.getOptions().width,d:o})}}},function(e,t){e.exports=__webpack_require__(162)},function(e,t){e.exports=__webpack_require__(44)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),r=o(11),s=o(13),i=o(3);t.DefaultNodeFactory=class extends i.AbstractReactFactory{constructor(){super("default")}generateReactWidget(e){return n.createElement(s.DefaultNodeWidget,{engine:this.engine,node:e.model})}generateModel(e){return new r.DefaultNodeModel}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(6),r=o(3);t.DefaultPortFactory=class extends r.AbstractModelFactory{constructor(){super("default")}generateModel(){return new n.DefaultPortModel({name:"unknown"})}}}])},483:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(10),DiamondPortModel_1=__webpack_require__(484);exports.DiamondNodeModel=class DiamondNodeModel extends react_diagrams_1.NodeModel{constructor(){super({type:"diamond"}),this.addPort(new DiamondPortModel_1.DiamondPortModel(react_diagrams_1.PortModelAlignment.TOP)),this.addPort(new DiamondPortModel_1.DiamondPortModel(react_diagrams_1.PortModelAlignment.LEFT)),this.addPort(new DiamondPortModel_1.DiamondPortModel(react_diagrams_1.PortModelAlignment.BOTTOM)),this.addPort(new DiamondPortModel_1.DiamondPortModel(react_diagrams_1.PortModelAlignment.RIGHT))}}},484:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(10);exports.DiamondPortModel=class DiamondPortModel extends react_diagrams_1.PortModel{constructor(alignment){super({type:"diamond",name:alignment,alignment:alignment})}createLinkModel(){return new react_diagrams_1.DefaultLinkModel}}},490:function(module,exports,__webpack_require__){__webpack_require__(491),__webpack_require__(639),module.exports=__webpack_require__(640)},5:function(module,exports,__webpack_require__){window,module.exports=function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=27)}([function(e,t){e.exports=__webpack_require__(51)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(4);!function(e){e.MOUSE_DOWN="mouse-down",e.MOUSE_UP="mouse-up",e.MOUSE_MOVE="mouse-move",e.MOUSE_WHEEL="mouse-wheel",e.KEY_DOWN="key-down",e.KEY_UP="key-up"}(t.InputType||(t.InputType={})),t.Action=class{constructor(e){this.options=e,this.id=s.Toolkit.UID()}setEngine(e){this.engine=e}}},function(e,t){e.exports=__webpack_require__(0)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(4);t.BaseObserver=class{constructor(){this.listeners={}}fireEventInternal(e,t,i){this.iterateListeners(s=>{if(!e&&!i.firing)return!1;s[t]&&s[t](i)})}fireEvent(e,t){e=Object.assign({firing:!0,stopPropagation:()=>{e.firing=!1}},e),this.fireEventInternal(!0,"eventWillFire",Object.assign({},e,{function:t})),this.fireEventInternal(!1,t,e),this.fireEventInternal(!0,"eventDidFire",Object.assign({},e,{function:t}))}iterateListeners(e){for(let t in this.listeners)if(!1===e(this.listeners[t]))return}getListenerHandle(e){for(let t in this.listeners)if(this.listeners[t]===e)return{id:t,listner:e,deregister:()=>{delete this.listeners[t]}}}registerListener(e){const t=s.Toolkit.UID();return this.listeners[t]=e,{id:t,listner:e,deregister:()=>{delete this.listeners[t]}}}deregisterListener(e){if("object"==typeof e)return e.deregister(),!0;const t=this.getListenerHandle(e);return!!t&&(t.deregister(),!0)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(29);class n{static UID(){return n.TESTING?(n.TESTING_UID++,`${n.TESTING_UID}`):"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}static closest(e,t){return document.body.closest?e.closest(t):s(e,t)}}n.TESTING=!1,n.TESTING_UID=0,t.Toolkit=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(6),n=i(1);t.AbstractDisplacementState=class extends s.State{constructor(e){super(e),this.registerAction(new n.Action({type:n.InputType.MOUSE_DOWN,fire:e=>{this.initialX=e.event.clientX,this.initialY=e.event.clientY;const t=this.engine.getRelativePoint(e.event.clientX,e.event.clientY);this.initialXRelative=t.x,this.initialYRelative=t.y}})),this.registerAction(new n.Action({type:n.InputType.MOUSE_MOVE,fire:e=>{const{event:t}=e;this.fireMouseMoved({displacementX:t.clientX-this.initialX,displacementY:t.clientY-this.initialY,virtualDisplacementX:(t.clientX-this.initialX)/(this.engine.getModel().getZoomLevel()/100),virtualDisplacementY:(t.clientY-this.initialY)/(this.engine.getModel().getZoomLevel()/100),event:t})}})),this.registerAction(new n.Action({type:n.InputType.MOUSE_UP,fire:e=>{this.eject()}}))}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),n=i(0);t.State=class{constructor(e){this.actions=[],this.keys=[],this.childStates=[],this.options=e}setEngine(e){this.engine=e}getOptions(){return this.options}eject(){this.engine.getStateMachine().popState()}transitionWithEvent(e,t){this.engine.getStateMachine().pushState(e),this.engine.getActionEventBus().fireAction(t)}registerAction(e){this.actions.push(e)}tryActivateParentState(e){return this.keys.length>0&&!this.isKeysFullfilled(e)&&(this.eject(),!0)}tryActivateChildState(e){const t=this.findStateToActivate(e);return!!t&&(this.engine.getStateMachine().pushState(t),!0)}findStateToActivate(e){for(let t of this.childStates)if(t.isKeysFullfilled(e))return t;return null}isKeysFullfilled(e){return n.intersection(this.keys,e).length===this.keys.length}activated(e){const t=this.engine.getActionEventBus().getKeys();if(!this.tryActivateParentState(t)&&!this.tryActivateChildState(t)){this.handler1=this.engine.getActionEventBus().registerAction(new s.Action({type:s.InputType.KEY_DOWN,fire:()=>{this.tryActivateChildState(this.engine.getActionEventBus().getKeys())}})),this.handler2=this.engine.getActionEventBus().registerAction(new s.Action({type:s.InputType.KEY_UP,fire:()=>{this.tryActivateParentState(this.engine.getActionEventBus().getKeys())}}));for(let e of this.actions)this.engine.getActionEventBus().registerAction(e)}}deactivated(e){this.handler1&&this.handler1(),this.handler2&&this.handler2();for(let e of this.actions)this.engine.getActionEventBus().deregisterAction(e)}}},function(e,t){e.exports=__webpack_require__(162)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),n=i(9);t.CanvasModel=class extends n.BaseEntity{constructor(e={}){super(Object.assign({zoom:100,gridSize:0,offsetX:0,offsetY:0},e)),this.layers=[]}getSelectionEntities(){return s.flatMap(this.layers,e=>e.getSelectionEntities())}getSelectedEntities(){return s.filter(this.getSelectionEntities(),e=>e.isSelected())}clearSelection(){s.forEach(this.getSelectedEntities(),e=>{e.setSelected(!1)})}getModels(){return s.flatMap(this.layers,e=>s.values(e.getModels()))}addLayer(e){e.setParent(this),e.registerListener({entityRemoved:e=>{}}),this.layers.push(e)}removeLayer(e){const t=this.layers.indexOf(e);return-1!==t&&(this.layers.splice(t,1),!0)}getLayers(){return this.layers}setGridSize(e=0){this.options.gridSize=e,this.fireEvent({size:e},"gridUpdated")}getGridPosition(e){return 0===this.options.gridSize?e:this.options.gridSize*Math.floor((e+this.options.gridSize/2)/this.options.gridSize)}deserializeModel(e,t){const i={},s={},n={},o={data:e,engine:t,registerModel:e=>{i[e.getID()]=e,n[e.getID()]&&n[e.getID()](e)},getModel:e=>i[e]?Promise.resolve(i[e]):(s[e]||(s[e]=new Promise(t=>{n[e]=t})),s[e])};this.deserialize(o)}deserialize(e){super.deserialize(e),this.options.offsetX=e.data.offsetX,this.options.offsetY=e.data.offsetY,this.options.zoom=e.data.zoom,this.options.gridSize=e.data.gridSize,s.forEach(e.data.layers,t=>{const i=e.engine.getFactoryForLayer(t.type).generateModel({initialConfig:t});i.deserialize(Object.assign({},e,{data:t})),this.addLayer(i)})}serialize(){return Object.assign({},super.serialize(),{offsetX:this.options.offsetX,offsetY:this.options.offsetY,zoom:this.options.zoom,gridSize:this.options.gridSize,layers:s.map(this.layers,e=>e.serialize())})}setZoomLevel(e){this.options.zoom=e,this.fireEvent({zoom:e},"zoomUpdated")}setOffset(e,t){this.options.offsetX=e,this.options.offsetY=t,this.fireEvent({offsetX:e,offsetY:t},"offsetUpdated")}setOffsetX(e){this.setOffset(e,this.options.offsetY)}setOffsetY(e){this.setOffset(this.options.offsetX,e)}getOffsetY(){return this.options.offsetY}getOffsetX(){return this.options.offsetX}getZoomLevel(){return this.options.zoom}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(4),n=i(0),o=i(3);t.BaseEntity=class extends o.BaseObserver{constructor(e={}){super(),this.options=Object.assign({id:s.Toolkit.UID()},e)}getOptions(){return this.options}getID(){return this.options.id}doClone(e={},t){}clone(e={}){if(e[this.options.id])return e[this.options.id];let t=n.clone(this);return t.options=Object.assign({},this.options,{id:s.Toolkit.UID()}),t.clearListeners(),e[this.options.id]=t,this.doClone(e,t),t}clearListeners(){this.listeners={}}deserialize(e){this.options.id=e.data.id,this.options.locked=e.data.locked}serialize(){return{id:this.options.id,locked:this.options.locked}}fireEvent(e,t){super.fireEvent(Object.assign({entity:this},e),t)}isLocked(){return this.options.locked}setLocked(e=!0){this.options.locked=e,this.fireEvent({locked:e},"lockChanged")}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(9),n=i(8);class o extends s.BaseEntity{constructor(e){super(e)}performanceTune(){return!0}getParentCanvasModel(){return this.parent?this.parent instanceof n.CanvasModel?this.parent:this.parent instanceof o?this.parent.getParentCanvasModel():null:null}getParent(){return this.parent}setParent(e){this.parent=e}getSelectionEntities(){return[this]}serialize(){return Object.assign({},super.serialize(),{type:this.options.type,selected:this.options.selected,extras:this.options.extras})}deserialize(e){super.deserialize(e),this.options.extras=e.data.extras,this.options.selected=e.data.selected}getType(){return this.options.type}isSelected(){return this.options.selected}isLocked(){return!!super.isLocked()||!!this.parent&&this.parent.isLocked()}setSelected(e=!0){this.options.selected=e,this.fireEvent({isSelected:e},"selectionChanged")}remove(){this.fireEvent({},"entityRemoved")}}t.BaseModel=o},function(e,t){e.exports=__webpack_require__(53)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(21);t.SelectionLayerModel=class extends s.LayerModel{constructor(){super({transformed:!1,isSvg:!1,type:"selection"})}setBox(e){this.box=e}getChildModelFactoryBank(){return null}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(3),n=i(0);t.FactoryBank=class extends s.BaseObserver{constructor(){super(),this.factories={}}getFactories(){return n.values(this.factories)}clearFactories(){for(let e in this.factories)this.deregisterFactory(e)}getFactory(e){if(!this.factories[e])throw new Error(`Cannot find factory with type [${e}]`);return this.factories[e]}registerFactory(e){e.setFactoryBank(this),this.factories[e.getType()]=e,this.fireEvent({factory:e},"factoryAdded")}deregisterFactory(e){const t=this.factories[e];t.setFactoryBank(null),delete this.factories[e],this.fireEvent({factory:t},"factoryRemoved")}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),n=i(0);t.ActionEventBus=class{constructor(e){this.actions={},this.engine=e,this.keys={}}getKeys(){return n.keys(this.keys)}registerAction(e){return e.setEngine(this.engine),this.actions[e.id]=e,()=>{this.deregisterAction(e)}}deregisterAction(e){e.setEngine(null),delete this.actions[e.id]}getActionsForType(e){return n.filter(this.actions,t=>t.options.type===e)}getModelForEvent(e){return e.model?e.model:this.engine.getMouseElement(e.event)}getActionsForEvent(e){const{event:t}=e;return"mousedown"===t.type?this.getActionsForType(s.InputType.MOUSE_DOWN):"mouseup"===t.type?this.getActionsForType(s.InputType.MOUSE_UP):"keydown"===t.type?(this.keys[t.key.toLowerCase()]=!0,this.getActionsForType(s.InputType.KEY_DOWN)):"keyup"===t.type?(delete this.keys[t.key.toLowerCase()],this.getActionsForType(s.InputType.KEY_UP)):"mousemove"===t.type?this.getActionsForType(s.InputType.MOUSE_MOVE):"wheel"===t.type?this.getActionsForType(s.InputType.MOUSE_WHEEL):[]}fireAction(e){const t=this.getActionsForEvent(e);for(let i of t)i.options.fire(e)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),n=i(3);t.StateMachine=class extends n.BaseObserver{constructor(e){super(),this.engine=e,this.stateStack=[]}getCurrentState(){return this.currentState}pushState(e){this.stateStack.push(e),this.setState(e)}popState(){this.stateStack.pop(),this.setState(s.last(this.stateStack))}setState(e){e.setEngine(this.engine),this.currentState&&this.currentState.deactivated(e);const t=this.currentState;this.currentState=e,this.currentState&&(this.currentState.activated(t),this.fireEvent({newState:e},"stateChanged"))}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractFactory=class{constructor(e){this.type=e}setDiagramEngine(e){this.engine=e}setFactoryBank(e){this.bank=e}getType(){return this.type}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(16);t.AbstractModelFactory=class extends s.AbstractFactory{}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(17);t.AbstractReactFactory=class extends s.AbstractModelFactory{}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(10),n=i(7);t.BasePositionModel=class extends s.BaseModel{constructor(e){super(e),this.position=e.position||new n.Point(0,0)}setPosition(e,t){this.position="object"==typeof e?e:new n.Point(e,t),this.fireEvent({},"positionChanged")}getBoundingBox(){return new n.Rectangle(this.position,0,0)}deserialize(e){super.deserialize(e),this.position=new n.Point(e.data.x,e.data.y)}serialize(){return Object.assign({},super.serialize(),{x:this.position.x,y:this.position.y})}getPosition(){return this.position}getX(){return this.position.x}getY(){return this.position.y}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(2),n=i(11),o=i(33);var r;!function(e){const t=o.css`
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		position: absolute;
		pointer-events: none;
		transform-origin: 0 0;
		width: 100%;
		height: 100%;
		overflow: visible;
	`;e.DivLayer=n.default.div`
		${t}
	`,e.SvgLayer=n.default.svg`
		${t}
	`}(r||(r={})),t.TransformLayerWidget=class extends s.Component{constructor(e){super(e),this.state={}}getTransform(){const e=this.props.layer.getParent();return`\n\t\t\ttranslate(\n\t\t\t\t${e.getOffsetX()}px,\n\t\t\t\t${e.getOffsetY()}px)\n\t\t\tscale(\n\t\t\t\t${e.getZoomLevel()/100}\n\t\t\t)\n  \t`}getTransformStyle(){return this.props.layer.getOptions().transformed?{transform:this.getTransform()}:{}}render(){return this.props.layer.getOptions().isSvg?s.createElement(r.SvgLayer,{style:this.getTransformStyle()},this.props.children):s.createElement(r.DivLayer,{style:this.getTransformStyle()},this.props.children)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(10),n=i(0);t.LayerModel=class extends s.BaseModel{constructor(e={}){super(e),this.models={},this.repaintEnabled=!0}deserialize(e){super.deserialize(e),this.options.isSvg=!!e.data.isSvg,this.options.transformed=!!e.data.transformed,n.forEach(e.data.models,t=>{const i=this.getChildModelFactoryBank(e.engine).getFactory(t.type).generateModel({initialConfig:t});i.deserialize(Object.assign({},e,{data:t})),this.addModel(i)})}serialize(){return Object.assign({},super.serialize(),{isSvg:this.options.isSvg,transformed:this.options.transformed,models:n.mapValues(this.models,e=>e.serialize())})}isRepaintEnabled(){return this.repaintEnabled}allowRepaint(e=!0){this.repaintEnabled=e}remove(){this.parent&&this.parent.removeLayer(this),super.remove()}addModel(e){e.setParent(this),this.models[e.getID()]=e}getSelectionEntities(){return n.flatMap(this.models,e=>e.getSelectionEntities())}getModels(){return this.models}getModel(e){return this.models[e]}removeModel(e){const t="string"==typeof e?e:e.getID();return!!this.models[t]&&(delete this.models[t],!0)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(2),n=i(11);var o;!function(e){e.Container=n.default.div`
		position: absolute;
		background-color: rgba(0, 192, 255, 0.2);
		border: solid 2px rgb(0, 192, 255);
	`}(o||(o={})),t.SelectionBoxWidget=class extends s.Component{render(){const{rect:e}=this.props;return s.createElement(o.Container,{style:{top:e.top,left:e.left,width:e.width,height:e.height}})}}},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))(function(n,o){function r(e){try{c(s.next(e))}catch(e){o(e)}}function a(e){try{c(s.throw(e))}catch(e){o(e)}}function c(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(r,a)}c((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const n=i(5);t.DragCanvasState=class extends n.AbstractDisplacementState{constructor(){super({name:"drag-canvas"})}activated(e){const t=Object.create(null,{activated:{get:()=>super.activated}});return s(this,void 0,void 0,function*(){t.activated.call(this,e),this.engine.getModel().clearSelection(),yield this.engine.repaintCanvas(!0);for(let e of this.engine.getModel().getLayers())e.allowRepaint(!1);this.initialCanvasX=this.engine.getModel().getOffsetX(),this.initialCanvasY=this.engine.getModel().getOffsetY()})}deactivated(e){super.deactivated(e);for(let e of this.engine.getModel().getLayers())e.allowRepaint(!0)}fireMouseMoved(e){this.engine.getModel().setOffset(this.initialCanvasX+e.displacementX,this.initialCanvasY+e.displacementY),this.engine.repaintCanvas()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(6),n=i(1),o=i(25);t.SelectingState=class extends s.State{constructor(){super({name:"selecting"}),this.keys=["shift"],this.registerAction(new n.Action({type:n.InputType.MOUSE_DOWN,fire:e=>{const t=this.engine.getActionEventBus().getModelForEvent(e);t?(t.setSelected(!0),this.engine.repaintCanvas()):this.transitionWithEvent(new o.SelectionBoxState,e)}}))}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(5),n=i(12),o=i(7);t.SelectionBoxState=class extends s.AbstractDisplacementState{constructor(){super({name:"selection-box"})}activated(e){super.activated(e),this.layer=new n.SelectionLayerModel,this.engine.getModel().addLayer(this.layer)}deactivated(e){super.deactivated(e),this.layer.remove(),this.engine.repaintCanvas()}getBoxDimensions(e){const t=this.engine.getRelativePoint(e.event.clientX,e.event.clientY);return{left:t.x>this.initialXRelative?this.initialXRelative:t.x,top:t.y>this.initialYRelative?this.initialYRelative:t.y,width:Math.abs(t.x-this.initialXRelative),height:Math.abs(t.y-this.initialYRelative),right:t.x<this.initialXRelative?this.initialXRelative:t.x,bottom:t.y<this.initialYRelative?this.initialYRelative:t.y}}fireMouseMoved(e){this.layer.setBox(this.getBoxDimensions(e));const t=this.engine.getRelativeMousePoint({clientX:this.initialX,clientY:this.initialY});e.virtualDisplacementX<0&&(t.x-=Math.abs(e.virtualDisplacementX)),e.virtualDisplacementY<0&&(t.y-=Math.abs(e.virtualDisplacementY));const i=new o.Rectangle(t,Math.abs(e.virtualDisplacementX),Math.abs(e.virtualDisplacementY));for(let e of this.engine.getModel().getSelectionEntities())if(e.getBoundingBox){const t=e.getBoundingBox();i.containsPoint(t.getTopLeft())&&i.containsPoint(t.getBottomRight())&&e.setSelected(!0)}this.engine.repaintCanvas()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(5),n=i(1),o=i(19);t.MoveItemsState=class extends s.AbstractDisplacementState{constructor(){super({name:"move-items"}),this.registerAction(new n.Action({type:n.InputType.MOUSE_DOWN,fire:e=>{const t=this.engine.getActionEventBus().getModelForEvent(e);t.isSelected()||this.engine.getModel().clearSelection(),t.setSelected(!0),this.engine.repaintCanvas()}}))}activated(e){super.activated(e),this.initialPositions={}}fireMouseMoved(e){const t=this.engine.getModel().getSelectedEntities(),i=this.engine.getModel();for(let s of t)if(s instanceof o.BasePositionModel){if(s.isLocked())continue;this.initialPositions[s.getID()]||(this.initialPositions[s.getID()]={point:s.getPosition(),item:s});const t=this.initialPositions[s.getID()].point;s.setPosition(i.getGridPosition(t.x+e.virtualDisplacementX),i.getGridPosition(t.y+e.virtualDisplacementY))}this.engine.repaintCanvas()}}},function(e,t,i){"use strict";function s(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),s(i(28)),s(i(4)),s(i(8)),s(i(16)),s(i(17)),s(i(18)),s(i(3)),s(i(13)),s(i(1)),s(i(14)),s(i(9)),s(i(10)),s(i(19)),s(i(8)),s(i(32)),s(i(21)),s(i(20)),s(i(35)),s(i(22)),s(i(12)),s(i(36)),s(i(5)),s(i(6)),s(i(15)),s(i(37)),s(i(23)),s(i(24)),s(i(25)),s(i(26))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(13),n=i(3),o=i(7),r=i(14),a=i(30),c=i(31),l=i(15);t.CanvasEngine=class extends n.BaseObserver{constructor(){super(),this.model=null,this.eventBus=new r.ActionEventBus(this),this.stateMachine=new l.StateMachine(this),this.layerFactories=new s.FactoryBank,this.registerFactoryBank(this.layerFactories),this.eventBus.registerAction(new a.ZoomCanvasAction),this.eventBus.registerAction(new c.DeleteItemsAction)}getStateMachine(){return this.stateMachine}getRelativeMousePoint(e){const t=this.getRelativePoint(e.clientX,e.clientY);return new o.Point((t.x-this.model.getOffsetX())/(this.model.getZoomLevel()/100),(t.y-this.model.getOffsetY())/(this.model.getZoomLevel()/100))}getRelativePoint(e,t){const i=this.canvas.getBoundingClientRect();return new o.Point(e-i.left,t-i.top)}registerFactoryBank(e){e.registerListener({factoryAdded:e=>{e.factory.setDiagramEngine(this)},factoryRemoved:e=>{e.factory.setDiagramEngine(null)}})}getActionEventBus(){return this.eventBus}getLayerFactories(){return this.layerFactories}getFactoryForLayer(e){return"string"==typeof e?this.layerFactories.getFactory(e):this.layerFactories.getFactory(e.getType())}setModel(e){this.model=e,this.canvas&&requestAnimationFrame(()=>{this.repaintCanvas()})}getModel(){return this.model}repaintCanvas(e){const t=()=>{this.iterateListeners(e=>{e.repaintCanvas&&e.repaintCanvas()})};if(e)return new Promise(e=>{const i=this.registerListener({rendered:()=>{e(),i.deregister()}});t()});t()}setCanvas(e){this.canvas!==e&&(this.canvas=e,e&&this.fireEvent({},"canvasReady"))}getCanvas(){return this.canvas}getMouseElement(e){return null}zoomToFit(){const e=this.canvas.clientWidth/this.canvas.scrollWidth,t=this.canvas.clientHeight/this.canvas.scrollHeight,i=e<t?e:t;this.model.setZoomLevel(this.model.getZoomLevel()*i),this.model.setOffset(0,0),this.repaintCanvas()}}},function(e,t){e.exports=__webpack_require__(831)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1);t.ZoomCanvasAction=class extends s.Action{constructor(e={}){super({type:s.InputType.MOUSE_WHEEL,fire:t=>{const{event:i}=t;for(let e of this.engine.getModel().getLayers())e.allowRepaint(!1);const s=this.engine.getModel();i.stopPropagation();const n=this.engine.getModel().getZoomLevel()/100;let o=e.inverseZoom?-i.deltaY:i.deltaY;i.ctrlKey&&o%1!=0?o/=3:o/=60,s.getZoomLevel()+o>10&&s.setZoomLevel(s.getZoomLevel()+o);const r=s.getZoomLevel()/100,a=i.currentTarget.getBoundingClientRect(),c=a.width,l=a.height,d=c*r-c*n,u=l*r-l*n,h=i.clientX-a.left,p=i.clientY-a.top,g=(h-s.getOffsetX())/n/c,f=(p-s.getOffsetY())/n/l;s.setOffset(s.getOffsetX()-d*g,s.getOffsetY()-u*f),this.engine.repaintCanvas();for(let e of this.engine.getModel().getLayers())e.allowRepaint(!0)}})}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),n=i(0);t.DeleteItemsAction=class extends s.Action{constructor(e={}){e=Object.assign({keyCodes:[46,8]},e),super({type:s.InputType.KEY_DOWN,fire:t=>{-1!==e.keyCodes.indexOf(t.event.keyCode)&&(n.forEach(this.engine.getModel().getSelectedEntities(),e=>{e.isLocked()||e.remove()}),this.engine.repaintCanvas())}})}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(2),n=i(20),o=i(11),r=i(34);var a;!function(e){e.Canvas=o.default.div`
		position: relative;
		cursor: move;
		overflow: hidden;
	`}(a||(a={})),t.CanvasWidget=class extends s.Component{constructor(e){super(e),this.ref=s.createRef(),this.state={action:null,diagramEngineListener:null}}componentWillUnmount(){this.props.engine.deregisterListener(this.canvasListener),this.props.engine.setCanvas(null),document.removeEventListener("keyup",this.keyUp),document.removeEventListener("keydown",this.keyDown)}registerCanvas(){this.props.engine.setCanvas(this.ref.current),this.props.engine.iterateListeners(e=>{e.rendered&&e.rendered()})}componentDidUpdate(){this.registerCanvas()}componentDidMount(){this.canvasListener=this.props.engine.registerListener({repaintCanvas:()=>{this.forceUpdate()}}),this.keyDown=e=>{this.props.engine.getActionEventBus().fireAction({event:e})},this.keyUp=e=>{this.props.engine.getActionEventBus().fireAction({event:e})},document.addEventListener("keyup",this.keyUp),document.addEventListener("keydown",this.keyDown),this.registerCanvas()}render(){const e=this.props.engine.getModel();return s.createElement(a.Canvas,{className:this.props.className,ref:this.ref,onWheel:e=>{this.props.engine.getActionEventBus().fireAction({event:e})},onMouseDown:e=>{this.props.engine.getActionEventBus().fireAction({event:e})},onMouseUp:e=>{this.props.engine.getActionEventBus().fireAction({event:e})},onMouseMove:e=>{this.props.engine.getActionEventBus().fireAction({event:e})}},e.getLayers().map(e=>s.createElement(n.TransformLayerWidget,{layer:e},s.createElement(r.SmartLayerWidget,{layer:e,engine:this.props.engine,key:e.getID()}))))}}},function(e,t){e.exports=__webpack_require__(44)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(2);t.SmartLayerWidget=class extends s.Component{shouldComponentUpdate(){return this.props.layer.isRepaintEnabled()}render(){return this.props.engine.getFactoryForLayer(this.props.layer).generateReactWidget({model:this.props.layer})}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(2),n=i(18),o=i(12),r=i(22);t.SelectionBoxLayerFactory=class extends n.AbstractReactFactory{constructor(){super("selection")}generateModel(e){return new o.SelectionLayerModel}generateReactWidget(e){return s.createElement(r.SelectionBoxWidget,{rect:e.model.box})}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(2),n=i(0);t.PeformanceWidget=class extends s.Component{shouldComponentUpdate(e,t,i){return!this.props.model.performanceTune()||this.props.model!==e.model||!n.isEqual(this.props.serialized,e.serialized)}render(){return this.props.children()}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(6),n=i(1),o=i(23),r=i(24),a=i(26);t.DefaultState=class extends s.State{constructor(){super({name:"default"}),this.childStates=[new r.SelectingState],this.registerAction(new n.Action({type:n.InputType.MOUSE_DOWN,fire:e=>{this.engine.getActionEventBus().getModelForEvent(e)?this.transitionWithEvent(new a.MoveItemsState,e):this.transitionWithEvent(new o.DragCanvasState,e)}}))}}}])},59:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=__webpack_require__(0),styled_1=__webpack_require__(53);var S;!function(S){S.Toolbar=styled_1.default.div`
		padding: 5px;
		display: flex;
		flex-shrink: 0;
	`,S.Content=styled_1.default.div`
		flex-grow: 1;
		height: 100%;
	`,S.Container=styled_1.default.div`
		background: black;
		display: flex;
		flex-direction: column;
		height: 100%;
		border-radius: 5px;
		overflow: hidden;
	`}(S||(S={})),exports.DemoButton=styled_1.default.button`
	background: rgb(60, 60, 60);
	font-size: 14px;
	padding: 5px 10px;
	border: none;
	color: white;
	outline: none;
	cursor: pointer;
	margin: 2px;
	border-radius: 3px;

	&:hover {
		background: rgb(0, 192, 255);
	}
`;exports.DemoWorkspaceWidget=class DemoWorkspaceWidget extends React.Component{render(){return React.createElement(S.Container,null,React.createElement(S.Toolbar,null,this.props.buttons),React.createElement(S.Content,null,this.props.children))}}},640:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(283);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)(function loadStories(){__webpack_require__(804)},module)}.call(this,__webpack_require__(641)(module))},804:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0});const react_1=__webpack_require__(283),addon_options_1=__webpack_require__(805),theming_1=__webpack_require__(807);__webpack_require__(826);const react_canvas_core_1=__webpack_require__(5);react_canvas_core_1.Toolkit.TESTING=!0,react_1.addParameters({options:{theme:theming_1.themes.dark}}),addon_options_1.setOptions({name:"STORM React Diagrams",url:"https://github.com/projectstorm/react-diagrams",addonPanelInRight:!0}),react_1.addDecorator(fn=>(react_canvas_core_1.Toolkit.TESTING_UID=0,fn()));const demo_simple_1=__webpack_require__(833),demo_simple_flow_1=__webpack_require__(1149),demo_performance_1=__webpack_require__(1150),demo_locks_1=__webpack_require__(1151),demo_grid_1=__webpack_require__(1152),demo_listeners_1=__webpack_require__(1153),demo_zoom_to_fit_1=__webpack_require__(1165),demo_labelled_links_1=__webpack_require__(1166),demo_dynamic_ports_1=__webpack_require__(1167);react_1.storiesOf("Simple Usage",module).add("Simple example",demo_simple_1.default).add("Simple flow example",demo_simple_flow_1.default).add("Performance demo",demo_performance_1.default).add("Locked widget",demo_locks_1.default).add("Canvas grid size",demo_grid_1.default).add("Events and listeners",demo_listeners_1.default).add("Zoom to fit",demo_zoom_to_fit_1.default).add("Dynamic ports",demo_dynamic_ports_1.default).add("Links with labels",demo_labelled_links_1.default);const demo_cloning_1=__webpack_require__(1168),demo_serializing_1=__webpack_require__(1169),demo_mutate_graph_1=__webpack_require__(1171),demo_drag_and_drop_1=__webpack_require__(1172),demo_smart_routing_1=__webpack_require__(1177),demo_right_angles_routing_1=__webpack_require__(1178);react_1.storiesOf("Advanced Techniques",module).add("Clone Selected",demo_cloning_1.default).add("Serializing and de-serializing",demo_serializing_1.default).add("Programatically modifying graph",demo_mutate_graph_1.default).add("Drag and drop",demo_drag_and_drop_1.default).add("Smart routing",demo_smart_routing_1.default).add("Right angles routing",demo_right_angles_routing_1.default);const demo_custom_node1_1=__webpack_require__(1179),demo_custom_link1_1=__webpack_require__(1183);react_1.storiesOf("Custom Models",module).add("Custom diamond node",demo_custom_node1_1.default).add("Custom animated links",demo_custom_link1_1.default);const demo_dagre_1=__webpack_require__(1184);react_1.storiesOf("3rd party libraries",module).add("Auto Distribute (Dagre)",demo_dagre_1.default)}).call(this,__webpack_require__(18)(module))},826:function(module,exports,__webpack_require__){var content=__webpack_require__(827);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(829)(content,options);content.locals&&(module.exports=content.locals)},827:function(module,exports,__webpack_require__){(module.exports=__webpack_require__(828)(!1)).push([module.i,"html,\nbody,\n#root {\n\theight: 100%;\n\tpadding: 0;\n\tmargin: 0;\n}\n",""])},833:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const react_diagrams_1=__webpack_require__(10),React=__webpack_require__(0),react_canvas_core_1=__webpack_require__(5),DemoCanvasWidget_1=__webpack_require__(14);exports.default=()=>{var engine=react_diagrams_1.default(),model=new react_diagrams_1.DiagramModel,node1=new react_diagrams_1.DefaultNodeModel({name:"Node 1",color:"rgb(0,192,255)"});node1.setPosition(100,100);let port1=node1.addOutPort("Out");var node2=new react_diagrams_1.DefaultNodeModel("Node 2","rgb(192,255,0)");let port2=node2.addInPort("In");node2.setPosition(400,100);let link1=port1.link(port2);return link1.getOptions().testName="Test",link1.addLabel("Hello World!"),model.addAll(node1,node2,link1),engine.setModel(model),React.createElement(DemoCanvasWidget_1.DemoCanvasWidget,null,React.createElement(react_canvas_core_1.CanvasWidget,{engine:engine}))}},834:function(module,exports,__webpack_require__){window,module.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=12)}([function(t,e){t.exports=__webpack_require__(404)},function(t,e){t.exports=__webpack_require__(0)},function(t,e){t.exports=__webpack_require__(51)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),s=i(4),o=i(5),r=i(2),a=i(14),h=i(0),g=i(15);class l extends h.DefaultLinkFactory{constructor(){super(l.NAME),this.ROUTING_SCALING_FACTOR=5,this.canvasMatrix=[],this.routingMatrix=[],this.hAdjustmentFactor=0,this.vAdjustmentFactor=0,this.calculateMatrixDimensions=()=>{const t=r.values(this.engine.getModel().getNodes()).map(t=>({x:t.getX(),width:t.width,y:t.getY(),height:t.height})),e=r.values(this.engine.getModel().getLinks()),i=r.flatMap(e.map(t=>[t.getSourcePort(),t.getTargetPort()])).filter(t=>null!==t).map(t=>({x:t.getX(),width:t.width,y:t.getY(),height:t.height})),n=r.flatMap(e.map(t=>t.getPoints())).map(t=>({x:t.getX(),width:0,y:t.getY(),height:0})),s=this.engine.getCanvas(),o=Math.floor(Math.min(r.minBy(r.concat(t,i,n),t=>t.x).x,0)/this.ROUTING_SCALING_FACTOR)*this.ROUTING_SCALING_FACTOR,a=r.maxBy(r.concat(t,i,n),t=>t.x+t.width),h=Math.max(a.x+a.width,s.offsetWidth),g=Math.floor(Math.min(r.minBy(r.concat(t,i,n),t=>t.y).y,0)/this.ROUTING_SCALING_FACTOR)*this.ROUTING_SCALING_FACTOR,l=r.maxBy(r.concat(t,i,n),t=>t.y+t.height),c=Math.max(l.y+l.height,s.offsetHeight);return{width:Math.ceil(Math.abs(o)+h),hAdjustmentFactor:Math.abs(o)/this.ROUTING_SCALING_FACTOR+1,height:Math.ceil(Math.abs(g)+c),vAdjustmentFactor:Math.abs(g)/this.ROUTING_SCALING_FACTOR+1}},this.markNodes=t=>{r.values(this.engine.getModel().getNodes()).forEach(e=>{const i=Math.floor(e.getX()/this.ROUTING_SCALING_FACTOR),n=Math.ceil((e.getX()+e.width)/this.ROUTING_SCALING_FACTOR),s=Math.floor(e.getY()/this.ROUTING_SCALING_FACTOR),o=Math.ceil((e.getY()+e.height)/this.ROUTING_SCALING_FACTOR);for(let e=i-1;e<=n+1;e++)for(let i=s-1;i<o+1;i++)this.markMatrixPoint(t,this.translateRoutingX(e),this.translateRoutingY(i))})},this.markPorts=t=>{r.flatMap(r.values(this.engine.getModel().getLinks()).map(t=>[].concat(t.getSourcePort(),t.getTargetPort()))).filter(t=>null!==t).forEach(e=>{const i=Math.floor(e.x/this.ROUTING_SCALING_FACTOR),n=Math.ceil((e.x+e.width)/this.ROUTING_SCALING_FACTOR),s=Math.floor(e.y/this.ROUTING_SCALING_FACTOR),o=Math.ceil((e.y+e.height)/this.ROUTING_SCALING_FACTOR);for(let e=i-1;e<=n+1;e++)for(let i=s-1;i<o+1;i++)this.markMatrixPoint(t,this.translateRoutingX(e),this.translateRoutingY(i))})},this.markMatrixPoint=(t,e,i)=>{void 0!==t[i]&&void 0!==t[i][e]&&(t[i][e]=1)}}setDiagramEngine(t){super.setDiagramEngine(t),t.getStateMachine().registerListener({stateChanged:e=>{if(e.newState instanceof g.AbstractDisplacementState){const e=t.getActionEventBus().registerAction(new g.Action({type:g.InputType.MOUSE_UP,fire:()=>{this.calculateRoutingMatrix(),t.repaintCanvas(),e()}}))}}}),this.listener=t.registerListener({canvasReady:()=>{r.defer(()=>{this.calculateRoutingMatrix(),t.repaintCanvas()})}})}setFactoryBank(t){super.setFactoryBank(t),!t&&this.listener&&this.listener.deregister()}generateReactWidget(t){return n.createElement(o.PathFindingLinkWidget,{diagramEngine:this.engine,link:t.model,factory:this})}generateModel(t){return new s.PathFindingLinkModel}getCanvasMatrix(){return 0===this.canvasMatrix.length&&this.calculateCanvasMatrix(),this.canvasMatrix}calculateCanvasMatrix(){const{width:t,hAdjustmentFactor:e,height:i,vAdjustmentFactor:n}=this.calculateMatrixDimensions();this.hAdjustmentFactor=e,this.vAdjustmentFactor=n;const s=Math.ceil(t/this.ROUTING_SCALING_FACTOR),o=Math.ceil(i/this.ROUTING_SCALING_FACTOR);this.canvasMatrix=r.range(0,o).map(()=>new Array(s).fill(0))}getRoutingMatrix(){return 0===this.routingMatrix.length&&this.calculateRoutingMatrix(),this.routingMatrix}calculateRoutingMatrix(){const t=r.cloneDeep(this.getCanvasMatrix());this.markNodes(t),this.markPorts(t),this.routingMatrix=t}translateRoutingX(t,e=!1){return t+this.hAdjustmentFactor*(e?-1:1)}translateRoutingY(t,e=!1){return t+this.vAdjustmentFactor*(e?-1:1)}generateDynamicPath(t){let e=a();return e=e.moveto(t[0][0]*this.ROUTING_SCALING_FACTOR,t[0][1]*this.ROUTING_SCALING_FACTOR),t.slice(1).forEach(t=>{e=e.lineto(t[0]*this.ROUTING_SCALING_FACTOR,t[1]*this.ROUTING_SCALING_FACTOR)}),e.print()}}l.NAME="pathfinding",e.PathFindingLinkFactory=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(3),s=i(0);e.PathFindingLinkModel=class extends s.DefaultLinkModel{constructor(t={}){super(Object.assign({type:n.PathFindingLinkFactory.NAME},t))}performanceTune(){return!1}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),s=i(2),o=i(6),r=i(0);e.PathFindingLinkWidget=class extends n.Component{constructor(t){super(t),this.refPaths=[],this.state={selected:!1},this.pathFinding=new o.default(this.props.factory)}componentDidUpdate(){this.props.link.setRenderedPaths(this.refPaths.map(t=>t.current))}componentDidMount(){this.props.link.setRenderedPaths(this.refPaths.map(t=>t.current))}componentWillUnmount(){this.props.link.setRenderedPaths([])}generateLink(t,e){const i=n.createRef();return this.refPaths.push(i),n.createElement(r.DefaultLinkSegmentWidget,{key:`link-${e}`,path:t,selected:this.state.selected,diagramEngine:this.props.diagramEngine,factory:this.props.diagramEngine.getFactoryForLink(this.props.link),link:this.props.link,forwardRef:i,onSelection:t=>{this.setState({selected:t})},extras:{}})}render(){this.refPaths=[];var t=this.props.link.getPoints(),e=[];const i=this.pathFinding.calculateDirectPath(s.first(t),s.last(t)),o=this.props.factory.getRoutingMatrix(),r=this.pathFinding.calculateLinkStartEndCoords(o,i);if(r){const{start:t,end:i,pathToStart:n,pathToEnd:s}=r,a=this.pathFinding.calculateDynamicPath(o,t,i,n,s);e.push(this.generateLink(this.props.factory.generateDynamicPath(a),"0"))}return n.createElement(n.Fragment,null,e)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(13),s=new n.JumpPointFinder({heuristic:n.Heuristic.manhattan,diagonalMovement:n.DiagonalMovement.Never});e.default=class{constructor(t){this.instance=s,this.factory=t}calculateDirectPath(t,e){const i=this.factory.getCanvasMatrix(),o=new n.Grid(i);return s.findPath(this.factory.translateRoutingX(Math.floor(t.getX()/this.factory.ROUTING_SCALING_FACTOR)),this.factory.translateRoutingY(Math.floor(t.getY()/this.factory.ROUTING_SCALING_FACTOR)),this.factory.translateRoutingX(Math.floor(e.getX()/this.factory.ROUTING_SCALING_FACTOR)),this.factory.translateRoutingY(Math.floor(e.getY()/this.factory.ROUTING_SCALING_FACTOR)),o)}calculateLinkStartEndCoords(t,e){const i=e.findIndex(e=>!!t[e[1]]&&0===t[e[1]][e[0]]),n=e.length-1-e.slice().reverse().findIndex(e=>!!t[e[1]]&&0===t[e[1]][e[0]]);if(-1===i||-1===n)return;const s=e.slice(0,i),o=e.slice(n);return{start:{x:e[i][0],y:e[i][1]},end:{x:e[n][0],y:e[n][1]},pathToStart:s,pathToEnd:o}}calculateDynamicPath(t,e,i,o,r){const a=new n.Grid(t),h=s.findPath(e.x,e.y,i.x,i.y,a),g=o.concat(h,r).map(t=>[this.factory.translateRoutingX(t[0],!0),this.factory.translateRoutingY(t[1],!0)]);return n.Util.compressPath(g)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),s=i(8),o=i(0),r=i(9);class a extends n.Component{constructor(t){super(t),this.handleMove=function(t){this.draggingEvent(t,this.dragging_index)}.bind(this),this.handleUp=function(t){this.setState({canDrag:!1,selected:!1}),window.removeEventListener("mousemove",this.handleMove),window.removeEventListener("mouseup",this.handleUp)}.bind(this),this.refPaths=[],this.state={selected:!1,canDrag:!1},this.dragging_index=0}componentDidUpdate(){this.props.link.setRenderedPaths(this.refPaths.map(t=>t.current))}componentDidMount(){this.props.link.setRenderedPaths(this.refPaths.map(t=>t.current))}componentWillUnmount(){this.props.link.setRenderedPaths([])}generateLink(t,e,i){const s=n.createRef();return this.refPaths.push(s),n.createElement(o.DefaultLinkSegmentWidget,{key:`link-${i}`,path:t,selected:this.state.selected,diagramEngine:this.props.diagramEngine,factory:this.props.diagramEngine.getFactoryForLink(this.props.link),link:this.props.link,forwardRef:s,onSelection:t=>{this.setState({selected:t})},extras:e})}calculatePositions(t,e,i,n){if(0===i){let e=new s.PointModel({link:this.props.link,position:new r.Point(t[i].getX(),t[i].getY())});return this.props.link.addPoint(e,i),void this.dragging_index++}if(i===t.length-2){let e=new s.PointModel({link:this.props.link,position:new r.Point(t[i+1].getX(),t[i+1].getY())});return void this.props.link.addPoint(e,i+1)}if(i-2>0){let s={[i-2]:t[i-2].getPosition(),[i+1]:t[i+1].getPosition(),[i-1]:t[i-1].getPosition()};if(Math.abs(s[i-1][n]-s[i+1][n])<5)return s[i-2][n]=this.props.diagramEngine.getRelativeMousePoint(e)[n],s[i+1][n]=this.props.diagramEngine.getRelativeMousePoint(e)[n],t[i-2].setPosition(s[i-2]),t[i+1].setPosition(s[i+1]),t[i-1].remove(),t[i-1].remove(),this.dragging_index--,void this.dragging_index--}if(i+2<t.length-2){let s={[i+3]:t[i+3].getPosition(),[i+2]:t[i+2].getPosition(),[i+1]:t[i+1].getPosition(),[i]:t[i].getPosition()};if(Math.abs(s[i+1][n]-s[i+2][n])<5)return s[i][n]=this.props.diagramEngine.getRelativeMousePoint(e)[n],s[i+3][n]=this.props.diagramEngine.getRelativeMousePoint(e)[n],t[i].setPosition(s[i]),t[i+3].setPosition(s[i+3]),t[i+1].remove(),void t[i+1].remove()}let o={[i]:t[i].getPosition(),[i+1]:t[i+1].getPosition()};o[i][n]=this.props.diagramEngine.getRelativeMousePoint(e)[n],o[i+1][n]=this.props.diagramEngine.getRelativeMousePoint(e)[n],t[i].setPosition(o[i]),t[i+1].setPosition(o[i+1])}draggingEvent(t,e){let i=this.props.link.getPoints(),n=Math.abs(i[e].getX()-i[e+1].getX()),s=Math.abs(i[e].getY()-i[e+1].getY());0===n?this.calculatePositions(i,t,e,"x"):0===s&&this.calculatePositions(i,t,e,"y")}render(){let t=this.props.link.getPoints(),e=[],i=t[0],o=t[t.length-1];i.getX()>o.getX()&&(i=t[t.length-1],o=t[0]);let a=Math.abs(t[0].getY()-t[t.length-1].getY());if(null===this.props.link.getTargetPort()&&2===t.length)this.props.link.addPoint(new s.PointModel({link:this.props.link,position:new r.Point(i.getX(),o.getY())}),1);else if(null===this.props.link.getTargetPort())t[1].setPosition(i.getX(),o.getY());else if(!this.state.canDrag&&t.length>2)for(let e=1;e<t.length;e+=t.length-2){let i=Math.abs(t[e].getX()-t[e-1].getX()),n=Math.abs(t[e].getY()-t[e-1].getY());0===i&&0===n||(i<n?e-1==0?t[e].setPosition(t[e-1].getX(),t[e].getY()):e===t.length-1&&t[e-1].setPosition(t[e].getX(),t[e-1].getY()):e-1==0?t[e].setPosition(t[e].getX(),t[e-1].getY()):e===t.length-1&&t[e-1].setPosition(t[e-1].getX(),t[e].getY()))}2!==t.length||0===a||this.state.canDrag||this.props.link.addPoint(new s.PointModel({link:this.props.link,position:new r.Point(i.getX(),o.getY())}),1);for(let i=0;i<t.length-1;i++)e.push(this.generateLink(s.LinkWidget.generateLinePath(t[i],t[i+1]),{"data-linkid":this.props.link.getID(),"data-point":i,onMouseDown:t=>{0===t.button&&(this.setState({canDrag:!0}),this.dragging_index=i,window.addEventListener("mousemove",this.handleMove),window.addEventListener("mouseup",this.handleUp))}},i));return this.refPaths=[],n.createElement("g",{"data-default-link-test":this.props.link.getOptions().testName},e)}}a.defaultProps={color:"red",width:3,link:null,smooth:!1,diagramEngine:null,factory:null},e.RightAngleLinkWidget=a},function(t,e){t.exports=__webpack_require__(240)},function(t,e){t.exports=__webpack_require__(162)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),s=i(7),o=i(0),r=i(11);class a extends o.DefaultLinkFactory{constructor(){super(a.NAME)}generateModel(t){return new r.RightAngleLinkModel}generateReactWidget(t){return n.createElement(s.RightAngleLinkWidget,{diagramEngine:this.engine,link:t.model,factory:this})}}a.NAME="rightAngle",e.RightAngleLinkFactory=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(0),s=i(10);e.RightAngleLinkModel=class extends n.DefaultLinkModel{constructor(t={}){super(Object.assign({type:s.RightAngleLinkFactory.NAME},t))}performanceTune(){return!1}}},function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(3)),n(i(4)),n(i(5)),n(i(7)),n(i(10)),n(i(11)),n(i(6)),n(i(16))},function(t,e){t.exports=__webpack_require__(835)},function(t,e){t.exports=__webpack_require__(851)},function(t,e){t.exports=__webpack_require__(5)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(8),s=i(17),o=i(2),r=i(9);e.DagreEngine=class{constructor(t={}){this.options=t}redistribute(t){var e=new s.graphlib.Graph({multigraph:!0});e.setGraph(this.options.graph||{}),e.setDefaultEdgeLabel(function(){return{}});const i={};o.forEach(t.getNodes(),t=>{e.setNode(t.getID(),{width:t.width,height:t.height})}),o.forEach(t.getLinks(),t=>{t.getSourcePort()&&t.getTargetPort()&&(i[t.getID()]=!0,e.setEdge({v:t.getSourcePort().getNode().getID(),w:t.getTargetPort().getNode().getID(),name:t.getID()}))}),s.layout(e),e.nodes().forEach(i=>{const n=e.node(i);t.getNode(i).setPosition(n.x,n.y)}),this.options.includeLinks&&e.edges().forEach(i=>{const s=e.edge(i),o=t.getLink(i.name),a=[o.getFirstPoint()];for(let t=1;t<s.points.length-2;t++)a.push(new n.PointModel({link:o,position:new r.Point(s.points[t].x,s.points[t].y)}));o.setPoints(a.concat(o.getLastPoint()))})}}},function(t,e){t.exports=__webpack_require__(853)}])}},[[490,1,2]]]);
//# sourceMappingURL=main.17b7caad684a02f47e29.bundle.js.map